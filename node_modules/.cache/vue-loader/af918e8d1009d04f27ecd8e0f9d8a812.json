{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Season.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Season.vue","mtime":1634124251232},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkUHJvZHVjdDogbnVsbCwKICAgICAgc2Vhc29ucyA6W10sCiAgICAgIHByb2R1Y3Q6IG51bGwsCiAgICAgIHByb2R1Y3RzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIkNob2lzaXIgdW4gcHJvZHVpdC4uLiIgfV0sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZmV0Y2hQcm9kdWN0cygpOyAKICB9LAogIG1ldGhvZHM6IHsKICAgICBhc3luYyBmZXRjaFByb2R1Y3RzKCkgewogICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAuZ2V0KCIvcHJvZHVjdHMiKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gKHRoaXMucmVxdWVzdHMgPSByZXNwb25zZS5kYXRhKSk7CiAgICAgIGpzb24uZm9yRWFjaCgoZWxlbWVudCkgPT4KICAgICAgICB0aGlzLnByb2R1Y3RzLnB1c2goeyB2YWx1ZTogZWxlbWVudC5pZCwgdGV4dDogZWxlbWVudC5uYW1lIH0pCiAgICAgICk7CiAgICB9LAogICAgYXN5bmMgY2hhbmdlUHJvZHVjdChhcmcpIHsKICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgLmdldCgiL3Byb2R1Y3RzLyIgKyBhcmcpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICB0aGlzLnByb2R1Y3QgPSBqc29uWzBdOwogICAgICB0aGlzLnNlYXNvbnMgPSBqc29uWzBdLnNlYXNvbkluZm9ybWF0aW9uOwogICAgfSwKICAgIHNhdmUoKSB7CgogICAgICBheGlvcwogICAgICAgIC5wdXQoCiAgICAgICAgICAiL3Byb2R1Y3RzLyIgKyB0aGlzLnByb2R1Y3QuaWQsIAogICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICBpZDogdGhpcy5wcm9kdWN0LmlkLAogICAgICAgICAgICBxdWFudGl0aWVzIDogdGhpcy5wcm9kdWN0LnF1YW50aXRpZXMsCiAgICAKICAgICAgICAgICAgc2Vhc29uSW5mb3JtYXRpb246IFt7CiAgICAgICAgICAgICAgc2Vhc29uYWxpdHlJZDogdGhpcy5wcm9kdWN0LnNlYXNvbkluZm9ybWF0aW9uWzBdLnNlYXNvbmFsaXR5SWQsCiAgICAgICAgICAgICAgc3RhcnREYXRlOiB0aGlzLnByb2R1Y3Quc2Vhc29uSW5mb3JtYXRpb25bMF0uc3RhcnREYXRlLAogICAgICAgICAgICAgIGVuZERhdGU6IHRoaXMucHJvZHVjdC5zZWFzb25JbmZvcm1hdGlvblswXS5lbmREYXRlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBzZWFzb25hbGl0eUlkOiB0aGlzLnByb2R1Y3Quc2Vhc29uSW5mb3JtYXRpb25bMV0uc2Vhc29uYWxpdHlJZCwKICAgICAgICAgICAgICBzdGFydERhdGU6IHRoaXMucHJvZHVjdC5zZWFzb25JbmZvcm1hdGlvblsxXS5zdGFydERhdGUsCiAgICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy5wcm9kdWN0LnNlYXNvbkluZm9ybWF0aW9uWzFdLmVuZERhdGUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHNlYXNvbmFsaXR5SWQ6IHRoaXMucHJvZHVjdC5zZWFzb25JbmZvcm1hdGlvblsyXS5zZWFzb25hbGl0eUlkLAogICAgICAgICAgICAgIHN0YXJ0RGF0ZTogdGhpcy5wcm9kdWN0LnNlYXNvbkluZm9ybWF0aW9uWzJdLnN0YXJ0RGF0ZSwKICAgICAgICAgICAgICBlbmREYXRlOiB0aGlzLnByb2R1Y3Quc2Vhc29uSW5mb3JtYXRpb25bMl0uZW5kRGF0ZQogICAgICAgICAgICB9XQogICAgICAgICAgfSkKICAgICAgICAgIAogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Season.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Season.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row\n      ><b-col cols=\"4\">\n        <b-form-select\n          v-model=\"selectedProduct\"\n          :options=\"products\"\n          v-on:change=\"changeProduct\"\n          class=\"m-2\"\n        ></b-form-select>\n      </b-col>\n      <b-col cols=\"4\"></b-col>\n      <b-col cols=\"3\" class='legend-block'>\n        <div class='my-legend'>\n          <div class='legend-title'>Saisons</div>\n          <div class='legend-scale'>\n            <ul class='legend-labels'>\n              <li><span style='background:#8DD3C7'></span>pr√©</li>\n               <li><span style='background:#FFFFB3'></span>plein</li>\n                <li><span style='background:#BEBADA'></span>garde</li>\n            </ul>\n          </div>\n        </div>\n      </b-col>\n     \n    </b-row>\n    <br><br><br>\n   \n    <b-row>\n   \n      \n      <b-col\n        cols=\"3\"\n        v-for=\"\n          season in seasons\"\n        :key=\"season.seasonalityId\"\n        class=\"form-inline\"\n      >\n        <b-card v-bind:id=\"'card' + season.seasonalityId\">\n          <div class=\"form-inline\">\n            <b-form-datepicker \n              v-model=\"season.startDate\"\n              size=\"sm\"\n              :date-format-options=\"{\n                year: 'numeric',\n                month: 'numeric',\n                day: 'numeric',\n              }\"\n              \n            ></b-form-datepicker>\n\n            <b-form-datepicker\n              v-model=\"season.endDate\"\n              size=\"sm\"\n              :date-format-options=\"{\n                year: 'numeric',\n                month: 'numeric',\n                day: 'numeric',\n              }\"\n            >\n             \n            </b-form-datepicker>\n          </div>\n        </b-card>\n        \n      </b-col>\n      <b-col v-if=\"selectedProduct != null\">\n        <b-button class=\"m-3\" v-on:click=\"save()\" variant=\"primary\">Sauver</b-button>\n      </b-col>\n    </b-row>\n    \n  </b-container>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  components: {},\n  data() {\n    return {\n      selectedProduct: null,\n      seasons :[],\n      product: null,\n      products: [{ value: null, text: \"Choisir un produit...\" }],\n    };\n  },\n  mounted() {\n    this.fetchProducts(); \n  },\n  methods: {\n     async fetchProducts() {\n      const json = await axios\n        .get(\"/products\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.products.push({ value: element.id, text: element.name })\n      );\n    },\n    async changeProduct(arg) {\n      const json = await axios\n        .get(\"/products/\" + arg)\n        .then((response) => (this.requests = response.data));\n        this.product = json[0];\n      this.seasons = json[0].seasonInformation;\n    },\n    save() {\n\n      axios\n        .put(\n          \"/products/\" + this.product.id, \n             JSON.stringify({\n            id: this.product.id,\n            quantities : this.product.quantities,\n    \n            seasonInformation: [{\n              seasonalityId: this.product.seasonInformation[0].seasonalityId,\n              startDate: this.product.seasonInformation[0].startDate,\n              endDate: this.product.seasonInformation[0].endDate\n            },\n            {\n              seasonalityId: this.product.seasonInformation[1].seasonalityId,\n              startDate: this.product.seasonInformation[1].startDate,\n              endDate: this.product.seasonInformation[1].endDate\n            },\n            {\n              seasonalityId: this.product.seasonInformation[2].seasonalityId,\n              startDate: this.product.seasonInformation[2].startDate,\n              endDate: this.product.seasonInformation[2].endDate\n            }]\n          })\n          \n        )\n        .then((response) => (this.requests = response.data));\n    },\n  },\n};\n</script>\n\n  <style>\n  #card1 {\n  border: solid;\n  border-color: #8DD3C7;\n  margin-top: 1px;\n}\n#card2 {\n  border: solid;\n  border-color: #FFFFB3;\n  margin-top: 1px;\n}\n#card3 {\n  border: solid;\n  border-color: #BEBADA;\n  margin-top: 1px;\n}\n\n.card-body {\n  padding: 0px;\n}\n\n\n.b-form-btn-label-control.form-control > .form-control {\n  font-size: 0.7rem;\n}\n\n\n.legend-block{\n  border: 1px solid #999;\n  margin-right: 0px;\n   margin-left: 0px;\n   margin-top: 5px;\n  \n}\n\n.my-legend .legend-title{\n  text-align: left;\n  margin-bottom: 5px;\n  font-weight: bold;\n  font-size: 90%;\n}\n\n.my-legend .legend-scale ul{\n  margin: 0;\n  margin-bottom: 5px;\n  padding:0;\n  float: left;\n  list-style: none;\n}\n\n.my-legend .legend-scale ul li{\n  font-size: 80%;\n  list-style: none;\n  margin-left: 0;\n  line-height: 18px;\n  margin-bottom: 2px;\n}\n\n.my-legend ul.legend-labels li span{\n  display: block;\n  float: left;\n  height: 16px;\n  width: 30px;\n  margin-right: 5px;\n  margin-left: 0;\n  border: 1px solid #999;\n\n}\n</style> "]}]}