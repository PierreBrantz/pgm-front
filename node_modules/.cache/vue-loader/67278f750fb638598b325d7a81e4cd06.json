{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Request.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Request.vue","mtime":1624028504551},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFJlcXVlc3RNb2RhbCBmcm9tICIuLi9jb21wb25lbnRzL1JlcXVlc3RNb2RhbC52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgICAKICAgICJyZXF1ZXN0LW1vZGFsIjogUmVxdWVzdE1vZGFsLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06W3tuYW1lOiIiLCBxdWFudGl0eTogMCwgc3RhcnRQZXJpb2Q6IG51bGwsIGVuZFBlcmlvZDogbnVsbH1dLAogICAgICBjdXJyZW50TW9udGg6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDp7IAogIC4uLm1hcEdldHRlcnMoWyJyZXF1ZXN0cyJdKQogICAgfSwKICBtb3VudGVkKCkgeyAKICAgIHRoaXMuZmV0Y2hSZXF1ZXN0cygpOwogICAgdGhpcy5jdXJyZW50TW9udGggPSB0aGlzLmdldEN1cnJlbnRNb250aCgpOwogICAKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoUmVxdWVzdHMoKXsgICAKICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZmV0Y2hSZXF1ZXN0cyIse21vbnRoIDogdGhpcy5nZXRDdXJyZW50TW9udGgoKX0pOyAKICAgIH0sCgogICAgZ2V0Q3VycmVudE1vbnRoOiBmdW5jdGlvbigpeyAgICAKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCk7CiAgICB9LAogICAgZ2V0TW9udGhOYW1lOiBmdW5jdGlvbihpbmRleCkgewoKICAgICAgY29uc3QgbW9udGhzICAgID0gWydKYW52aWVyJywnRsOpdnJpZXInLCdNYXJzJywnQXZyaWwnLCdNYWknLCdKdWluJywnSnVpbGxldCcsJ0Fvw7t0JywnU2VwdGVtYnJlJywnT2N0b2JyZScsJ05vdmVtYnJlJywnRMOpY2VtYnJlJ107CiAgICAKICAgICAgcmV0dXJuIG1vbnRoc1tpbmRleF07CiAgICB9LAogICAgc2V0TmV4dE1vbnRoKCl7CiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gdGhpcy5jdXJyZW50TW9udGggKyAxOwogICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImZldGNoUmVxdWVzdHMiLHttb250aCA6IHRoaXMuY3VycmVudE1vbnRofSk7CiAgICB9LAogICAgc2V0UHJldmlvdXNNb250aCgpewogICAgICB0aGlzLmN1cnJlbnRNb250aCA9IHRoaXMuY3VycmVudE1vbnRoIC0gMTsKICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJmZXRjaFJlcXVlc3RzIix7bW9udGggOiB0aGlzLmN1cnJlbnRNb250aH0pOwogICAgfSwKCiAgICBvbkNsaWNrOiBmdW5jdGlvbiAoYXJnKSB7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoImJ2OjpzaG93Ojptb2RhbCIsICJtb2RhbC1yZXF1ZXN0IiwgIiNidG5TaG93Iik7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbihyZXF1ZXN0KXsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImRlbGV0ZVJlcXVlc3QiLHtyZXF1ZXN0IDogcmVxdWVzdH0pOyAgCiAgICB9CiAgCiAgfQp9Owo="},{"version":3,"sources":["Request.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Request.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col class=\"col-md-12 col-sm-12 col-xs-12\">\n        <div>\n        <h3> <b-icon @click.prevent=\"setPreviousMonth()\" icon=\"caret-left\" aria-hidden=\"true\"></b-icon> \n              Demandes pour {{getMonthName(currentMonth)}}  \n              <b-icon @click.prevent=\"setNextMonth()\" icon=\"caret-right\" aria-hidden=\"true\"></b-icon>\n        </h3>\n  \n        </div>\n        <br>\n        <div align=\"left\" v-for=\"request in requests\" :key=\"request.id\">\n            {{ request.name }} : {{ request.quantity }} {{ request.unit }}\n            <b-icon @click.prevent=\"remove(request)\" icon=\"trash\" aria-hidden=\"true\"></b-icon>\n        </div>\n       \n      \n       <b-button class=\"m-3\" @click=\"onClick\" variant=\"primary\"\n              >Ajouter une demande</b-button\n            >\n             <request-modal></request-modal>\n      </b-col>\n    </b-row>\n     \n  </b-container>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport RequestModal from \"../components/RequestModal.vue\";\n\nexport default {\n  components: {   \n    \"request-modal\": RequestModal,\n  },\n  data() {\n    return {\n      form:[{name:\"\", quantity: 0, startPeriod: null, endPeriod: null}],\n      currentMonth: 0\n    };\n  },\n  computed:{ \n  ...mapGetters([\"requests\"])\n    },\n  mounted() { \n    this.fetchRequests();\n    this.currentMonth = this.getCurrentMonth();\n   \n  },\n  methods: {\n    async fetchRequests(){   \n     await this.$store.dispatch(\"fetchRequests\",{month : this.getCurrentMonth()}); \n    },\n\n    getCurrentMonth: function(){    \n      const date = new Date();\n      return date.getMonth();\n    },\n    getMonthName: function(index) {\n\n      const months    = ['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre'];\n    \n      return months[index];\n    },\n    setNextMonth(){\n      this.currentMonth = this.currentMonth + 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n    setPreviousMonth(){\n      this.currentMonth = this.currentMonth - 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n\n    onClick: function (arg) {\n      this.$root.$emit(\"bv::show::modal\", \"modal-request\", \"#btnShow\");\n    },\n    remove: function(request){\n      this.$store.dispatch(\"deleteRequest\",{request : request});  \n    }\n  \n  }\n};\n</script>\n\n<style>\n</style>"]}]}