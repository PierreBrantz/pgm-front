{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Request.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Request.vue","mtime":1633352022183},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFJlcXVlc3RNb2RhbCBmcm9tICIuL0FkZFByb2R1Y2VyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyAgIAogICAgInJlcXVlc3QtbW9kYWwiOiBSZXF1ZXN0TW9kYWwsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTpbe25hbWU6IiIsIHF1YW50aXR5OiAwLCBzdGFydFBlcmlvZDogbnVsbCwgZW5kUGVyaW9kOiBudWxsfV0sCiAgICAgIGN1cnJlbnRNb250aDogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOnsgCiAgLi4ubWFwR2V0dGVycyhbInJlcXVlc3RzIl0pCiAgICB9LAogIG1vdW50ZWQoKSB7IAogICAgdGhpcy5mZXRjaFJlcXVlc3RzKCk7CiAgICB0aGlzLmN1cnJlbnRNb250aCA9IHRoaXMuZ2V0Q3VycmVudE1vbnRoKCk7CiAgIAogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hSZXF1ZXN0cygpeyAgIAogICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJmZXRjaFJlcXVlc3RzIix7bW9udGggOiB0aGlzLmdldEN1cnJlbnRNb250aCgpfSk7IAogICAgfSwKCiAgICBnZXRDdXJyZW50TW9udGg6IGZ1bmN0aW9uKCl7ICAgIAogICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKTsKICAgIH0sCiAgICBnZXRNb250aE5hbWU6IGZ1bmN0aW9uKGluZGV4KSB7CgogICAgICBjb25zdCBtb250aHMgICAgPSBbJ0phbnZpZXInLCdGw6l2cmllcicsJ01hcnMnLCdBdnJpbCcsJ01haScsJ0p1aW4nLCdKdWlsbGV0JywnQW/Du3QnLCdTZXB0ZW1icmUnLCdPY3RvYnJlJywnTm92ZW1icmUnLCdEw6ljZW1icmUnXTsKICAgIAogICAgICByZXR1cm4gbW9udGhzW2luZGV4XTsKICAgIH0sCiAgICBzZXROZXh0TW9udGgoKXsKICAgICAgdGhpcy5jdXJyZW50TW9udGggPSB0aGlzLmN1cnJlbnRNb250aCArIDE7CiAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZmV0Y2hSZXF1ZXN0cyIse21vbnRoIDogdGhpcy5jdXJyZW50TW9udGh9KTsKICAgIH0sCiAgICBzZXRQcmV2aW91c01vbnRoKCl7CiAgICAgIHRoaXMuY3VycmVudE1vbnRoID0gdGhpcy5jdXJyZW50TW9udGggLSAxOwogICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImZldGNoUmVxdWVzdHMiLHttb250aCA6IHRoaXMuY3VycmVudE1vbnRofSk7CiAgICB9LAoKICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIChhcmcpIHsKICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiYnY6OnNob3c6Om1vZGFsIiwgIm1vZGFsLXJlcXVlc3QiLCAiI2J0blNob3ciKTsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uKHJlcXVlc3QpewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZGVsZXRlUmVxdWVzdCIse3JlcXVlc3QgOiByZXF1ZXN0fSk7ICAKICAgIH0KICAKICB9Cn07Cg=="},{"version":3,"sources":["Request.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Request.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col class=\"col-md-12 col-sm-12 col-xs-12\">\n        <div>\n        <h3> <b-icon @click.prevent=\"setPreviousMonth()\" icon=\"caret-left\" aria-hidden=\"true\"></b-icon> \n              Demandes pour {{getMonthName(currentMonth)}}  \n              <b-icon @click.prevent=\"setNextMonth()\" icon=\"caret-right\" aria-hidden=\"true\"></b-icon>\n        </h3>\n  \n        </div>\n        <br>\n        <div align=\"left\" v-for=\"request in requests\" :key=\"request.id\">\n            {{ request.name }} : {{ request.quantity }} {{ request.unit }}\n            <b-icon @click.prevent=\"remove(request)\" icon=\"trash\" aria-hidden=\"true\"></b-icon>\n        </div>\n       \n      \n       <b-button class=\"m-3\" @click=\"onClick\" variant=\"primary\"\n              >Ajouter une demande</b-button\n            >\n             <request-modal></request-modal>\n      </b-col>\n    </b-row>\n     \n  </b-container>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport RequestModal from \"./AddProducer.vue\";\n\nexport default {\n  components: {   \n    \"request-modal\": RequestModal,\n  },\n  data() {\n    return {\n      form:[{name:\"\", quantity: 0, startPeriod: null, endPeriod: null}],\n      currentMonth: 0\n    };\n  },\n  computed:{ \n  ...mapGetters([\"requests\"])\n    },\n  mounted() { \n    this.fetchRequests();\n    this.currentMonth = this.getCurrentMonth();\n   \n  },\n  methods: {\n    async fetchRequests(){   \n     await this.$store.dispatch(\"fetchRequests\",{month : this.getCurrentMonth()}); \n    },\n\n    getCurrentMonth: function(){    \n      const date = new Date();\n      return date.getMonth();\n    },\n    getMonthName: function(index) {\n\n      const months    = ['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre'];\n    \n      return months[index];\n    },\n    setNextMonth(){\n      this.currentMonth = this.currentMonth + 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n    setPreviousMonth(){\n      this.currentMonth = this.currentMonth - 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n\n    onClick: function (arg) {\n      this.$root.$emit(\"bv::show::modal\", \"modal-request\", \"#btnShow\");\n    },\n    remove: function(request){\n      this.$store.dispatch(\"deleteRequest\",{request : request});  \n    }\n  \n  }\n};\n</script>\n\n<style>\n</style>"]}]}