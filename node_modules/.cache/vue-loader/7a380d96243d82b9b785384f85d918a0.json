{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Producer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Producer.vue","mtime":1644359912504},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFnR3JpZFZ1ZSB9IGZyb20gIkBhZy1ncmlkLWNvbW11bml0eS92dWUiOwppbXBvcnQgImFnLWdyaWQtY29tbXVuaXR5L2Rpc3Qvc3R5bGVzL2FnLWdyaWQuY3NzIjsKaW1wb3J0ICJhZy1ncmlkLWNvbW11bml0eS9kaXN0L3N0eWxlcy9hZy10aGVtZS1hbHBpbmUuY3NzIjsKaW1wb3J0IHsgQWxsQ29tbXVuaXR5TW9kdWxlcyB9IGZyb20gIkBhZy1ncmlkLWNvbW11bml0eS9hbGwtbW9kdWxlcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBqc1BERiBmcm9tICJqc3BkZiI7CmltcG9ydCBKc1BERkF1dG90YWJsZSBmcm9tICJqc3BkZi1hdXRvdGFibGUiOwppbXBvcnQgUHJvZHVjdERldGFpbE1vZGFsIGZyb20gIi4uL2NvbXBvbmVudHMvUHJvZHVjdERldGFpbE1vZGFsLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkUHJvZHVjZXI6IG51bGwsCiAgICAgIHNlbGVjdGVkUHJvZHVjdDogbnVsbCwKICAgICAgcHJvZHVjZXJzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIlByb2R1Y3RldXJzLi4uIiB9XSwKICAgICAgcHJvZHVjdExpc3Q6IFt7IHZhbHVlOiBudWxsLCB0ZXh0OiAiUHJvZHVpdHMuLi4iIH1dLAogICAgICBncmlkT3B0aW9uczogbnVsbCwKICAgICAgZ3JpZEFwaTogbnVsbCwKICAgICAgY29sdW1uQXBpOiBudWxsLAogICAgICByb3dEYXRhOiBudWxsLAogICAgICBjb2x1bW5EZWZzOiBudWxsLAogICAgICBtb2R1bGVzOiBBbGxDb21tdW5pdHlNb2R1bGVzLAogICAgICBwcm9kdWNlcklkOiBudWxsLAogICAgICBwcm9kdWN0c0J5UHJvZHVjZXI6IFtdLAogICAgICBwcm9kdWN0RGV0YWlsOiBudWxsLAogICAgICBwcm9kdWN0czogW10sCiAgICAgIHNlYXNvbnM6IFtdLAogICAgICBwcm9kdWNlckluZm86IG51bGwsCiAgICAgIGNvbnRyYWN0UGFyYW06IG51bGwKCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGN1cnJlbnRVc2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VyOwogICAgfSwKICAgIHNob3dBZG1pbkJvYXJkKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyWyJyb2xlcyJdKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXJbInJvbGVzIl0uaW5jbHVkZXMoIlJPTEVfQURNSU4iKTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgc2hvd1VzZXJCb2FyZCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlclsicm9sZXMiXSkgewogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyWyJyb2xlcyJdLmluY2x1ZGVzKCJST0xFX1VTRVIiKTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogIH0sCiAgY29tcG9uZW50czogewogICAgQWdHcmlkVnVlLAogICAgSnNQREZBdXRvdGFibGUsCiAgICAicHJvZHVjdC1kZXRhaWwtbW9kYWwiOiBQcm9kdWN0RGV0YWlsTW9kYWwsCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICAgIHRoaXMuZmV0Y2hQcm9kdWNlcnMoKTsKICAgIHRoaXMuZmV0Y2hQcm9kdWN0TGlzdCgpOwogICAgdGhpcy5mZXRjaFNlYXNvbmFsaXRpZXMoKTsKICAgIHRoaXMuZ3JpZEFwaSA9IHRoaXMuZ3JpZE9wdGlvbnMuYXBpOwogICAgdGhpcy5ncmlkQ29sdW1uQXBpID0gdGhpcy5ncmlkT3B0aW9ucy5jb2x1bW5BcGk7CiAgICB0aGlzLmNoYW5nZVByb2R1Y2VyKCk7CiAgICB0aGlzLmdyaWRBcGkuc2l6ZUNvbHVtbnNUb0ZpdCgpOwogICAgdGhpcy5mZXRjaENvbnRyYWN0UGFyYW1zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaW5kUHJvZHVjZXJOYW1lKGlkKSB7CiAgICAgIHRoaXMucHJvZHVjZXJzLmZpbmQoKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgZG93bmxvYWRQREYoKSB7CiAgICAgIAogICAgICBsZXQgcHJvZHVjZXIgPSB0aGlzLnByb2R1Y2VySW5mby5maW5kKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMucHJvZHVjZXJJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAKICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7CiAgICAgIGRvYy5zZXRGb250U2l6ZSgxOCk7CiAgICAgIGRvYy50ZXh0KHRoaXMuY29udHJhY3RQYXJhbS50aXRsZSwgMTAsIDEwKTsKICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsKICAgCiAgICAgIGRvYy50ZXh0KHByb2R1Y2VyLmZpcnN0TmFtZSArICIgIiArIHByb2R1Y2VyLm5hbWUgLCAxMCwgMjApOwogICAgIAogICAgICBkb2MudGV4dCgiR1NNOiAiICsgKHByb2R1Y2VyLmdzbSAhPSBudWxsID8gcHJvZHVjZXIuZ3NtIDogIiIpLCAxMCwgMjUpOwogICAgICAKICAgICAgZG9jLnRleHQoIlRlbC46ICIgKyAocHJvZHVjZXIucGhvbmUgIT0gbnVsbCA/IHByb2R1Y2VyLnBob25lIDogIiIpLCAxMCwgMzApOwogICAgICBkb2MudGV4dCgiTWFpbDogIiArIChwcm9kdWNlci5tYWlsICE9IG51bGwgPyBwcm9kdWNlci5tYWlsIDogIiIpICwgMTAsIDM1KTsKCiAgICAgIGRvYy50ZXh0KChwcm9kdWNlci5jb21wYW55ICE9IG51bGwgPyBwcm9kdWNlci5jb21wYW55IDogIiIpLCA4MCwgMjApOwogICAgICBkb2MudGV4dCgocHJvZHVjZXIubnVtYmVyICE9IG51bGwgPyAgcHJvZHVjZXIubnVtYmVyIDogIiIpICsgIiwgIiArIChwcm9kdWNlci5yb2FkICE9IG51bGwgPyBwcm9kdWNlci5yb2FkIDogIiIpICwgODAsIDI1KTsKICAgICAgZG9jLnRleHQoKHByb2R1Y2VyLnBvc3RDb2RlICE9IG51bGwgPyBwcm9kdWNlci5wb3N0Q29kZSA6ICIiKSArICIgIiArIChwcm9kdWNlci50b3duICE9IG51bGwgPyBwcm9kdWNlci50b3duIDogIiIpICwgODAsIDMwKTsKCiAgICAgIGRvYy50ZXh0KCJUVkE6ICIgKyAocHJvZHVjZXIudHZhICE9IG51bGwgPyBwcm9kdWNlci50dmEgOiAiIiksIDE2MCwgMjApOwogIAogICAgICBkb2MubGluZSgwLCA0MCwgNDAwLCAzNSk7CiAgICAgIGxldCByb3dzID0gW107CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdHNCeVByb2R1Y2VyKTsKICAgICAgdGhpcy5wcm9kdWN0c0J5UHJvZHVjZXIuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgIAogICAgICAgIGlmIChlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgIHZhciB0ZW1wID0gWwogICAgICAgICAgICBlbGVtZW50Lm5hbWUsCiAgICAgICAgICAgIGVsZW1lbnQucHJpY2UgKyAi4oKsIiwKICAgICAgICAvLyAgICBlbGVtZW50LnBhY2thZ2luZy5uYW1lLAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxLAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkyLAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkzLAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk0LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk1LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk2LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk3LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk4LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk5LAogICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxMCwKICAgICAgICAgICAgZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTEsCiAgICAgICAgICAgIGVsZW1lbnQuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTEyLAogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MSB8fCAwKSArCiAgICAgICAgICAgIChlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkyIHx8IDApICsKICAgICAgICAgICAgKGVsZW1lbnQuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTMgfHwgMCkgKwogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NCB8fCAwKSArCiAgICAgICAgICAgIChlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk1IHx8IDApICsKICAgICAgICAgICAgKGVsZW1lbnQuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTYgfHwgMCkgKwogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NyB8fCAwKSArCiAgICAgICAgICAgIChlbGVtZW50LmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk4IHx8IDApICsKICAgICAgICAgICAgKGVsZW1lbnQuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTkgfHwgMCkgKwogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTAgfHwgMCkgKwogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTEgfHwgMCkgKwogICAgICAgICAgICAoZWxlbWVudC5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTIgfHwgMCkKICAgICAgICAgICAgCiAgICAgICAgICAKICAgICAgICAgIF07CiAgICAgICAgICByb3dzLnB1c2godGVtcCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZG9jLnRleHQodGhpcy5jb250cmFjdFBhcmFtLmVuZFR4dCwgMjAsIDI0MCwgewogICAvLyAgIGFsaWduOiAncmlnaHQnCiAgICB9KQogICAgICAgZG9jLnRleHQoJ0ZhaXQgw6AgLi4uLi4uLi4uLi4uLi4uLi4uLCBsZSAuLi4uLi4uLi8uLi4uLi4uLy4uLi4uLi4nLCAxNDAsIDI2NSwgewogICAvLyAgIGFsaWduOiAncmlnaHQnCiAgICB9KQogICAgICAgICBkb2MudGV4dCgnU2lnbmF0dXJlJyAsIDE0MCwgMjczLCB7CiAgIC8vICAgYWxpZ246ICdyaWdodCcKICAgIH0pCgogICAgICBKc1BERkF1dG90YWJsZShkb2MsIHsKICAgICAgICBoZWFkOiBbCiAgICAgICAgICBbCiAgICAgICAgICAgICJMw6lndW1lIiwKICAgICAgICAgICAgIlByaXgiLAogICAgLy8gICAgICAgICJDb25kaXQjIiwKICAgICAgICAgICAgIkphbiIsCiAgICAgICAgICAgICJGZXYiLAogICAgICAgICAgICAiTWFyIiwKICAgICAgICAgICAgIkF2ciIsCiAgICAgICAgICAgICJNYWkiLAogICAgICAgICAgICAiSnVpIiwKICAgICAgICAgICAgIkp1bCIsCiAgICAgICAgICAgICJBb3UiLAogICAgICAgICAgICAiU2VwIiwKICAgICAgICAgICAgIk9jdCIsCiAgICAgICAgICAgICJOb3YiLAogICAgICAgICAgICAiRGVjIiwKICAgICAgICAgICAgIlRvdCIKICAgICAgICAgIF0sCiAgICAgICAgXSwKICAgICAgICBtYXJnaW46IHsgdG9wOiA1MCB9LAogICAgICAgIGJvZHk6IHJvd3MsCiAgICAgIH0pLAogICAgICAgIGRvYy5zYXZlKAogICAgICAgICAgIkNvbnRyYXRfIiArCiAgICAgICAgICAgIHRoaXMucHJvZHVjZXJzLmZpbmQoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gdGhpcy5wcm9kdWNlcklkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRleHQgKwogICAgICAgICAgICAiLnBkZiIKICAgICAgICApOwogICAgfSwKCiAgICBhc3luYyBmZXRjaFByb2R1Y2VycygpIHsKICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgLmdldCgiL3Byb2R1Y2VycyIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAganNvbi5mb3JFYWNoKChlbGVtZW50KSA9PgogICAgICAgIHRoaXMucHJvZHVjZXJzLnB1c2goeyB2YWx1ZTogZWxlbWVudC5pZCwgdGV4dDogZWxlbWVudC5hYnIgfSkKICAgICAgICAKICAgICAgKTsKICAgICAgdGhpcy5wcm9kdWNlckluZm8gPSBqc29uOwogICAgfSwKCiAgICAgYXN5bmMgZmV0Y2hDb250cmFjdFBhcmFtcygpIHsKICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgLmdldCgiL2NvbnRyYWN0UGFyYW1zIikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpOwogICAgICB0aGlzLmNvbnRyYWN0UGFyYW0gPSBqc29uOwogICAgIAogICAgfSwKCiAgICBhc3luYyBmZXRjaFByb2R1Y3RMaXN0KCkgewogICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAuZ2V0KCIvcHJvZHVjdHMiKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gKHRoaXMucmVxdWVzdHMgPSByZXNwb25zZS5kYXRhKSk7ICAKICAgICAgICB0aGlzLnByb2R1Y3RzID0ganNvbjsgICAgICAKICAgICAganNvbi5mb3JFYWNoKChlbGVtZW50KSA9PgogICAgICAgIHRoaXMucHJvZHVjdExpc3QucHVzaCh7IHZhbHVlOiBlbGVtZW50LmlkLCB0ZXh0OiBlbGVtZW50Lm5hbWUgfSkKICAgICAgKTsKICAgIH0sCiAgICBhc3luYyBmZXRjaFNlYXNvbmFsaXRpZXMoKSB7CiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBheGlvcwogICAgICAgIC5nZXQoIi9zZWFzb25zIikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnNlYXNvbnMgPSByZXNwb25zZS5kYXRhKSk7CiAgICB9LAogICAgb25HcmlkUmVhZHkocGFyYW1zKSB7CiAgICAgIHBhcmFtcy5hcGkuc2l6ZUNvbHVtbnNUb0ZpdCgpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcGFyYW1zLmFwaS5zaXplQ29sdW1uc1RvRml0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgcGFyYW1zLmFwaS5zaXplQ29sdW1uc1RvRml0KCk7CiAgICB9LAogICAgYXN5bmMgZmluZFByb2R1Y2VyQnlBYnIoYXJnKSB7CiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBheGlvcwogICAgICAgIC5nZXQoIi9wcm9kdWNlcnMvYWJyLyIgKyBhcmcpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKCiAgICAgIHJldHVybiBqc29uOwogICAgfSwKCiAgICBhc3luYyBjaGFuZ2VQcm9kdWNlcihhcmcpIHsKICAgICAgaWYgKHRoaXMuc2hvd1VzZXJCb2FyZCkgewogICAgICAgIGFyZyA9IGF3YWl0IHRoaXMuZmluZFByb2R1Y2VyQnlBYnIodGhpcy5jdXJyZW50VXNlci51c2VybmFtZSkuSWQ7CiAgICAgIH0KCiAgICAgIGlmIChhcmcpIHsKICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAgIC5nZXQoIi9wcm9kdWN0cy9wcm9kdWNlci8iICsgYXJnKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgICAgLnRoZW4oKHJvd0RhdGEpID0+ICh0aGlzLnJvd0RhdGEgPSByb3dEYXRhKSk7CiAgICAgICAgdGhpcy5wcm9kdWNlcklkID0gYXJnOwogICAgICAgIHRoaXMucHJvZHVjdHNCeVByb2R1Y2VyID0ganNvbjsKICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZHVjZXIgPSB0aGlzLnByb2R1Y2VySWQ7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgYWRkUHJvZHVjdENsaWNrKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RlZFByb2R1Y2VyID09IG51bGwpIHsKICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCJWZXVpbGxleiBjaG9pc2lyIHVuIHByb2R1Y3RldXIuLi4iLCB7CiAgICAgICAgICB0aXRsZTogIkluZm8iLAogICAgICAgICAgdmFyaWFudDogImRhbmdlciIsCiAgICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUHJvZHVjdCA9PSBudWxsKSB7CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgiVmV1aWxsZXogY2hvaXNpciB1biBwcm9kdWl0Li4uIiwgewogICAgICAgICAgdGl0bGU6ICJJbmZvIiwKICAgICAgICAgIHZhcmlhbnQ6ICJkYW5nZXIiLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAiL3Byb2R1Y2Vycy8iICsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZHVjZXIgKwogICAgICAgICAgICAgICIvcHJvZHVjdC8iICsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZHVjdAogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAgIC5nZXQoIi9wcm9kdWN0cy9wcm9kdWNlci8iICsgdGhpcy5zZWxlY3RlZFByb2R1Y2VyKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgICAgLnRoZW4oKHJvd0RhdGEpID0+ICh0aGlzLnJvd0RhdGEgPSByb3dEYXRhKSk7CiAgICAgIAogICAgICAgIHRoaXMucHJvZHVjdHNCeVByb2R1Y2VyID0ganNvbjsKICAgICAgCiAgICAgIH0KICAgIH0sCiAgICBvbkNlbGxDbGlja2VkKHBhcmFtcykgewogICAgICBpZiAocGFyYW1zLmNvbHVtbi5jb2xJZCA9PSAibmFtZSIpIHsgICAgICAgCiAgICAgICAgdGhpcy5wcm9kdWN0RGV0YWlsID0gdGhpcy5wcm9kdWN0c1twYXJhbXMuZGF0YS5pZCAtIDFdOwogICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoImJ2OjpzaG93Ojptb2RhbCIsICJwcm9kdWN0LWRldGFpbC1tb2RhbCIsICIjYnRuU2hvdyIpOwogICAgICB9CiAgICB9LAogIH0sCgogIGJlZm9yZU1vdW50KCkgewogCiAgICB0aGlzLmdyaWRPcHRpb25zID0gewogICAgICBhc3luYyBvbkNlbGxWYWx1ZUNoYW5nZWQgKGV2ZW50KSB7CiAgICAgIAogICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgIi9wcm9kdWN0cy8iICsKICAgICAgICAgICAgICBldmVudC5kYXRhLmlkICsKICAgICAgICAgICAgICAiL3Byb2R1Y2VyLyIgKwogICAgICAgICAgICAgIGV2ZW50LmRhdGEucHJvZHVjZXJzWzBdLmlkLAogICAgICAgICAgICBldmVudC5kYXRhCiAgICAgICAgICApCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpOwogICAgICAgICAgdGhpcy5wcm9kdWNlclByb2R1Y3RzID0ganNvbi5wcm9kdWNlclByb2R1Y3RzOwogICAgICB9LAogICAgfTsKCiAgICB0aGlzLmNvbHVtbkRlZnMgPSBbCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiTMOpZ3VtZXMiLAogICAgICAgIGZpZWxkOiAibmFtZSIsCiAgICAgICAgd2lkdGg6IDE1MCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBwaW5uZWQ6ICJsZWZ0IiwKICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlck5hbWU6ICJDb25kaXQjIiwKICAgICAgICBmaWVsZDogIm5hbWUiLAogICAgICAgIHdpZHRoOiA2MCwKICAgICAgICBwaW5uZWQ6ICJsZWZ0IiwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLnBhY2thZ2luZy5uYW1lICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLnBhY2thZ2luZy5uYW1lOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiUHJpeCIsCiAgICAgICAgZmllbGQ6ICJwcmljZSIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5wcmljZSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5wcmljZSArICLigqwiOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDUwLAogICAgICAgIHBpbm5lZDogImxlZnQiLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTEiLAogICAgICAgIGhlYWRlck5hbWU6ICJKYW4iLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgY2VsbFN0eWxlOiBjZWxsU3R5bGVKYW4sCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7ICAgICAgICAgIAogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKHZhbHVlQ2hhbmdlZCkgewogICAgICAgICAgICBpZiAoIXBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgICAgcXVhbnRpdHkxOiBuZXdWYWxJbnQgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MSA9IG5ld1ZhbEludDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHkyIiwKICAgICAgICBoZWFkZXJOYW1lOiAiRsOpdiIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICBjZWxsU3R5bGU6IGNlbGxTdHlsZUZlYiwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQpIHsKICAgICAgICAgICAgaWYgKCFwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSA9IHsKICAgICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICAgIHF1YW50aXR5MjogbmV3VmFsSW50LAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTIgPSBuZXdWYWxJbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5MyIsCiAgICAgICAgaGVhZGVyTmFtZTogIk1hciIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICBjZWxsU3R5bGU6IGNlbGxTdHlsZU1hciwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkzOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTM6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkzID0gbmV3VmFsSW50OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHk0IiwKICAgICAgICBoZWFkZXJOYW1lOiAiQXZyIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIGNlbGxTdHlsZTogY2VsbFN0eWxlQXByLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTQ7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVNldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKCFwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkgPSB7CiAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgIHF1YW50aXR5NDogbmV3VmFsSW50LAogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTQgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTUiLAogICAgICAgIGhlYWRlck5hbWU6ICJNYWkiLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgY2VsbFN0eWxlOiBjZWxsU3R5bGVNYXksCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAoIXBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSA9IHsKICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgcXVhbnRpdHk1OiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NSA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5NiIsCiAgICAgICAgaGVhZGVyTmFtZTogIkp1aW4iLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgY2VsbFN0eWxlOiBjZWxsU3R5bGVKdW4sCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAoIXBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSA9IHsKICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgcXVhbnRpdHk2OiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NiA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5NyIsCiAgICAgICAgaGVhZGVyTmFtZTogIkp1aWwiLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgY2VsbFN0eWxlOiBjZWxsU3R5bGVKdWwsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NzsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAoIXBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSA9IHsKICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgcXVhbnRpdHk3OiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5NyA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5OCIsCiAgICAgICAgaGVhZGVyTmFtZTogIkFvdSIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICBjZWxsU3R5bGU6IGNlbGxTdHlsZUF1ZywKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk4OwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTg6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk4ID0gbmV3VmFsSW50OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHk5IiwKICAgICAgICBoZWFkZXJOYW1lOiAiU2VwIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIGNlbGxTdHlsZTogY2VsbFN0eWxlU2VwLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVNldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKCFwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5KSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkgPSB7CiAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgIHF1YW50aXR5OTogbmV3VmFsSW50LAogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTkgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTEwIiwKICAgICAgICBoZWFkZXJOYW1lOiAiT2N0IiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIGNlbGxTdHlsZTogY2VsbFN0eWxlT2N0LAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTEwOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTEwOiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTAgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTExIiwKICAgICAgICBoZWFkZXJOYW1lOiAiTm92IiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIGNlbGxTdHlsZTogY2VsbFN0eWxlTm92LAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTExOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTExOiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTEgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTEyIiwKICAgICAgICBoZWFkZXJOYW1lOiAiRGVjIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIGNlbGxTdHlsZTogY2VsbFN0eWxlRGVjLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTEyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5ID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTEyOiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTIgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgaGVhZGVyTmFtZTogIlF0ZSBUb3QiLAogICAgICAgIHdpZHRoOiA5MCwKICAgICAgICBwaW5uZWQ6ICJyaWdodCIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgcmV0dXJuIDA7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTEgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTIgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTMgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTQgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTUgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTYgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTcgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTggfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTkgfHwgMCkgKwogICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTEwIHx8IDApICsKICAgICAgICAgICAgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxMSB8fCAwKSArCiAgICAgICAgICAgIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTIgfHwgMCkKICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgfSwKCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiUHJpeCBUb3QiLAogICAgICAgIHdpZHRoOiA5MCwKICAgICAgICBwaW5uZWQ6ICJyaWdodCIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmICghcGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eSkgcmV0dXJuIDA7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoCiAgICAgICAgICAgICAgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxICoKICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnByaWNlICoKICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnNlYXNvbmFsaXR5UHJvZHVjdC5qYW51YXJ5IHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTIgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0LmZlYnJ1YXJ5IHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTMgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lm1hcmNoIHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTQgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0LmFwcmlsIHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTUgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lm1heSB8fCAwKSArCiAgICAgICAgICAgICAgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHk2ICoKICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnByaWNlICoKICAgICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnNlYXNvbmFsaXR5UHJvZHVjdC5qdW5lIHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTcgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lmp1bHkgfHwgMCkgKwogICAgICAgICAgICAgIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5OCAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5wcmljZSAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QuYXVndXN0IHx8IDApICsKICAgICAgICAgICAgICAocGFyYW1zLmRhdGEuY3VycmVudFJlYWxRdWFudGl0eS5xdWFudGl0eTkgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0LnNlcHRlbWJlciB8fCAwKSArCiAgICAgICAgICAgICAgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxMCAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5wcmljZSAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3Qub2N0b2JlciB8fCAwKSArCiAgICAgICAgICAgICAgKHBhcmFtcy5kYXRhLmN1cnJlbnRSZWFsUXVhbnRpdHkucXVhbnRpdHkxMSAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5wcmljZSAqCiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3Qubm92ZW1iZXIgfHwgMCkgKwogICAgICAgICAgICAgIChwYXJhbXMuZGF0YS5jdXJyZW50UmVhbFF1YW50aXR5LnF1YW50aXR5MTIgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucHJpY2UgKgogICAgICAgICAgICAgICAgcGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0LmRlY2VtYmVyIHx8IDApCiAgICAgICAgICAgICkudG9GaXhlZCgyKSArICLigqwiCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgIH0sCiAgICBdOwogICAgYXhpb3MKICAgICAgLmdldCgiL3Byb2R1Y3RzL3Byb2R1Y2VyLzAiKQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YSkpCiAgICAgIC50aGVuKChyb3dEYXRhKSA9PiAodGhpcy5yb3dEYXRhID0gcm93RGF0YSkpOwogIH0sCn07CndpbmRvdy5udW1iZXJQYXJzZXIgPSBmdW5jdGlvbiBudW1iZXJQYXJzZXIocGFyYW1zKSB7CiAgcmV0dXJuIE51bWJlcihwYXJhbXMubmV3VmFsdWUpOwp9OwoKd2luZG93LmNlbGxTdHlsZUphbiA9IGZ1bmN0aW9uIGNlbGxTdHlsZUphbihwYXJhbXMpIHsKICBjb25zdCBjb2xvciA9IG51bWJlclRvQ29sb3IocGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0LmphbnVhcnkpOwogIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfTsKfTsKCndpbmRvdy5jZWxsU3R5bGVGZWIgPSBmdW5jdGlvbiBjZWxsU3R5bGVGZWIocGFyYW1zKSB7CiAgY29uc3QgY29sb3IgPSBudW1iZXJUb0NvbG9yKHBhcmFtcy5kYXRhLnNlYXNvbmFsaXR5UHJvZHVjdC5mZWJydWFyeSk7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9Owp3aW5kb3cuY2VsbFN0eWxlTWFyID0gZnVuY3Rpb24gY2VsbFN0eWxlTWFyKHBhcmFtcykgewogIGNvbnN0IGNvbG9yID0gbnVtYmVyVG9Db2xvcihwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QubWFycyk7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9Owp3aW5kb3cuY2VsbFN0eWxlQXByID0gZnVuY3Rpb24gY2VsbFN0eWxlQXByKHBhcmFtcykgewogIGNvbnN0IGNvbG9yID0gbnVtYmVyVG9Db2xvcihwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QuYXByaWwpOwogIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfTsKfTsKd2luZG93LmNlbGxTdHlsZU1heSA9IGZ1bmN0aW9uIGNlbGxTdHlsZU1heShwYXJhbXMpIHsKICBjb25zdCBjb2xvciA9IG51bWJlclRvQ29sb3IocGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lm1heSk7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9Owp3aW5kb3cuY2VsbFN0eWxlSnVuID0gZnVuY3Rpb24gY2VsbFN0eWxlSnVuKHBhcmFtcykgewogIGNvbnN0IGNvbG9yID0gbnVtYmVyVG9Db2xvcihwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QuanVuZSk7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9Owp3aW5kb3cuY2VsbFN0eWxlSnVsID0gZnVuY3Rpb24gY2VsbFN0eWxlSnVsKHBhcmFtcykgewogIGNvbnN0IGNvbG9yID0gbnVtYmVyVG9Db2xvcihwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QuanVseSk7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9Owp3aW5kb3cuY2VsbFN0eWxlQXVnID0gZnVuY3Rpb24gY2VsbFN0eWxlQXVnKHBhcmFtcykgewogIGNvbnN0IGNvbG9yID0gbnVtYmVyVG9Db2xvcihwYXJhbXMuZGF0YS5zZWFzb25hbGl0eVByb2R1Y3QuYXVndXN0KTsKICByZXR1cm4geyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH07Cn07CndpbmRvdy5jZWxsU3R5bGVTZXAgPSBmdW5jdGlvbiBjZWxsU3R5bGVTZXAocGFyYW1zKSB7CiAgY29uc3QgY29sb3IgPSBudW1iZXJUb0NvbG9yKHBhcmFtcy5kYXRhLnNlYXNvbmFsaXR5UHJvZHVjdC5zZXB0ZW1iZXIpOwogIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfTsKfTsKd2luZG93LmNlbGxTdHlsZU9jdCA9IGZ1bmN0aW9uIGNlbGxTdHlsZU9jdChwYXJhbXMpIHsKICBjb25zdCBjb2xvciA9IG51bWJlclRvQ29sb3IocGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lm9jdG9iZXIpOwogIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfTsKfTsKd2luZG93LmNlbGxTdHlsZU5vdiA9IGZ1bmN0aW9uIGNlbGxTdHlsZU5vdihwYXJhbXMpIHsKICBjb25zdCBjb2xvciA9IG51bWJlclRvQ29sb3IocGFyYW1zLmRhdGEuc2Vhc29uYWxpdHlQcm9kdWN0Lm5vdmVtYmVyKTsKICByZXR1cm4geyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH07Cn07CndpbmRvdy5jZWxsU3R5bGVEZWMgPSBmdW5jdGlvbiBjZWxsU3R5bGVEZWMocGFyYW1zKSB7CiAgY29uc3QgY29sb3IgPSBudW1iZXJUb0NvbG9yKHBhcmFtcy5kYXRhLnNlYXNvbmFsaXR5UHJvZHVjdC5kZWNlbWJlcik7CiAgcmV0dXJuIHsgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9Owp9OwoKd2luZG93Lm51bWJlclRvQ29sb3IgPSBmdW5jdGlvbiBudW1iZXJUb0NvbG9yKHZhbCkgewogIGlmICh2YWwgPT09IDApIHsKICAgIHJldHVybiAiI2ZmZiI7CiAgfSBlbHNlIGlmICh2YWwgPT0gMSkgewogICAgcmV0dXJuICIjMjhhNzQ1IjsKICB9IGVsc2UgaWYgKHZhbCA9PSAyKSB7CiAgICByZXR1cm4gIiMxN2EyYjgiOwogIH0gZWxzZSB7CiAgICByZXR1cm4gIiNmZmMxMDciOwogIH0KfTsK"},{"version":3,"sources":["Producer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Producer.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div style=\"display: flex; flex-direction: column; height: 100%\">\n    <b-container fluid>\n      <b-card-group deck>\n        <b-card class=\"m-1\" align=\"center\" style=\"height: 50px\">\n          <b-row>\n            <b-col>\n              <b-form-select\n                v-if=\"showAdminBoard\"\n                v-model=\"selectedProducer\"\n                :options=\"producers\"\n                v-on:change=\"changeProducer\"\n                size=\"sm\"\n              ></b-form-select>\n            </b-col>\n            <b-col>\n              <b-form-select\n                v-model=\"selectedProduct\"\n                :options=\"productList\"\n                size=\"sm\"\n              ></b-form-select>\n            </b-col>\n            <b-col>\n              <b-button\n                variant=\"outline-primary\"\n                @click=\"addProductClick\"\n                size=\"sm\"\n                ><b-icon icon=\"link\" scale=\"1.3\" aria-hidden=\"true\"></b-icon\n              ></b-button>\n            </b-col>\n          </b-row>\n        </b-card>\n\n        <b-card\n          v-if=\"selectedProducer != null && selectedProducer != 0\"\n          class=\"m-1\"\n          style=\"height: 50px\"\n          align=\"center\"\n        >\n          <b-row>\n            <b-col>\n              <b-card-text>Enregistrer le contrat</b-card-text>\n            </b-col>\n            <b-col>\n              <b-button variant=\"outline-primary\" @click=\"downloadPDF\" size=\"sm\"\n                ><b-icon icon=\"download\" scale=\"1.3\" aria-hidden=\"true\"></b-icon\n              ></b-button>\n            </b-col>\n          </b-row>\n        </b-card>\n\n        <b-card v-if=\"seasons.length > 0\" id=\"my-legend\" class=\"m-1\" style=\"width: 100%;height: 50px\">\n          <b-row>\n            <b-col>\n              <ul>\n                <li><span style=\"background: #fff\"></span>{{ seasons[0].name}}</li>\n                <li><span style=\"background: #28a745\"></span>{{ seasons[1].name}}</li>\n              </ul>\n            </b-col>\n\n            <b-col>\n              <ul>\n                <li><span style=\"background: #17a2b8\"></span>{{ seasons[2].name}}</li>\n                <li><span style=\"background: #ffc107\"></span>{{ seasons[3].name}}</li>\n              </ul>\n            </b-col>\n          </b-row>\n        </b-card>\n      </b-card-group>\n      \n\n      <product-detail-modal :productDetail=\"productDetail\"></product-detail-modal>\n    </b-container>\n    <div style=\"flex: 1 1 auto\">\n      <ag-grid-vue\n        style=\"width: 100%; height: 100%\"\n        class=\"ag-theme-alpine\"\n        id=\"myGrid\"\n        :gridOptions=\"gridOptions\"\n        :rowData=\"rowData\"\n        :columnDefs=\"columnDefs\"\n        :modules=\"modules\"\n        @cell-clicked=\"onCellClicked\"\n      ></ag-grid-vue>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { AgGridVue } from \"@ag-grid-community/vue\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-alpine.css\";\nimport { AllCommunityModules } from \"@ag-grid-community/all-modules\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport JsPDFAutotable from \"jspdf-autotable\";\nimport ProductDetailModal from \"../components/ProductDetailModal.vue\";\n\nexport default {\n  data() {\n    return {\n      selectedProducer: null,\n      selectedProduct: null,\n      producers: [{ value: null, text: \"Producteurs...\" }],\n      productList: [{ value: null, text: \"Produits...\" }],\n      gridOptions: null,\n      gridApi: null,\n      columnApi: null,\n      rowData: null,\n      columnDefs: null,\n      modules: AllCommunityModules,\n      producerId: null,\n      productsByProducer: [],\n      productDetail: null,\n      products: [],\n      seasons: [],\n      producerInfo: null,\n      contractParam: null\n\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    showAdminBoard() {\n      if (this.currentUser && this.currentUser[\"roles\"]) {\n        return this.currentUser[\"roles\"].includes(\"ROLE_ADMIN\");\n      }\n      return false;\n    },\n    showUserBoard() {\n      if (this.currentUser && this.currentUser[\"roles\"]) {\n        return this.currentUser[\"roles\"].includes(\"ROLE_USER\");\n      }\n      return false;\n    },\n  },\n  components: {\n    AgGridVue,\n    JsPDFAutotable,\n    \"product-detail-modal\": ProductDetailModal,\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push(\"/login\");\n    }\n    this.fetchProducers();\n    this.fetchProductList();\n    this.fetchSeasonalities();\n    this.gridApi = this.gridOptions.api;\n    this.gridColumnApi = this.gridOptions.columnApi;\n    this.changeProducer();\n    this.gridApi.sizeColumnsToFit();\n    this.fetchContractParams();\n  },\n  methods: {\n    findProducerName(id) {\n      this.producers.find((item) => {\n        if (item.value === id) {\n          return item.text;\n        }\n      });\n    },\n\n    downloadPDF() {\n      \n      let producer = this.producerInfo.find((item) => {\n              if (item.id === this.producerId) {\n                return item;\n              }\n            });\n     \n      const doc = new jsPDF();\n      doc.setFontSize(18);\n      doc.text(this.contractParam.title, 10, 10);\n      doc.setFontSize(10);\n   \n      doc.text(producer.firstName + \" \" + producer.name , 10, 20);\n     \n      doc.text(\"GSM: \" + (producer.gsm != null ? producer.gsm : \"\"), 10, 25);\n      \n      doc.text(\"Tel.: \" + (producer.phone != null ? producer.phone : \"\"), 10, 30);\n      doc.text(\"Mail: \" + (producer.mail != null ? producer.mail : \"\") , 10, 35);\n\n      doc.text((producer.company != null ? producer.company : \"\"), 80, 20);\n      doc.text((producer.number != null ?  producer.number : \"\") + \", \" + (producer.road != null ? producer.road : \"\") , 80, 25);\n      doc.text((producer.postCode != null ? producer.postCode : \"\") + \" \" + (producer.town != null ? producer.town : \"\") , 80, 30);\n\n      doc.text(\"TVA: \" + (producer.tva != null ? producer.tva : \"\"), 160, 20);\n  \n      doc.line(0, 40, 400, 35);\n      let rows = [];\n      console.log(this.productsByProducer);\n      this.productsByProducer.forEach((element) => {\n        \n        if (element.currentRealQuantity) {\n          var temp = [\n            element.name,\n            element.price + \"€\",\n        //    element.packaging.name,\n            element.currentRealQuantity.quantity1,\n            element.currentRealQuantity.quantity2,\n            element.currentRealQuantity.quantity3,\n            element.currentRealQuantity.quantity4,\n            element.currentRealQuantity.quantity5,\n            element.currentRealQuantity.quantity6,\n            element.currentRealQuantity.quantity7,\n            element.currentRealQuantity.quantity8,\n            element.currentRealQuantity.quantity9,\n            element.currentRealQuantity.quantity10,\n            element.currentRealQuantity.quantity11,\n            element.currentRealQuantity.quantity12,\n            (element.currentRealQuantity.quantity1 || 0) +\n            (element.currentRealQuantity.quantity2 || 0) +\n            (element.currentRealQuantity.quantity3 || 0) +\n            (element.currentRealQuantity.quantity4 || 0) +\n            (element.currentRealQuantity.quantity5 || 0) +\n            (element.currentRealQuantity.quantity6 || 0) +\n            (element.currentRealQuantity.quantity7 || 0) +\n            (element.currentRealQuantity.quantity8 || 0) +\n            (element.currentRealQuantity.quantity9 || 0) +\n            (element.currentRealQuantity.quantity10 || 0) +\n            (element.currentRealQuantity.quantity11 || 0) +\n            (element.currentRealQuantity.quantity12 || 0)\n            \n          \n          ];\n          rows.push(temp);\n        }\n      });\n      doc.text(this.contractParam.endTxt, 20, 240, {\n   //   align: 'right'\n    })\n       doc.text('Fait à .................., le ......../......./.......', 140, 265, {\n   //   align: 'right'\n    })\n         doc.text('Signature' , 140, 273, {\n   //   align: 'right'\n    })\n\n      JsPDFAutotable(doc, {\n        head: [\n          [\n            \"Légume\",\n            \"Prix\",\n    //        \"Condit#\",\n            \"Jan\",\n            \"Fev\",\n            \"Mar\",\n            \"Avr\",\n            \"Mai\",\n            \"Jui\",\n            \"Jul\",\n            \"Aou\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n            \"Tot\"\n          ],\n        ],\n        margin: { top: 50 },\n        body: rows,\n      }),\n        doc.save(\n          \"Contrat_\" +\n            this.producers.find((item) => {\n              if (item.value === this.producerId) {\n                return item;\n              }\n            }).text +\n            \".pdf\"\n        );\n    },\n\n    async fetchProducers() {\n      const json = await axios\n        .get(\"/producers\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.producers.push({ value: element.id, text: element.abr })\n        \n      );\n      this.producerInfo = json;\n    },\n\n     async fetchContractParams() {\n      const json = await axios\n        .get(\"/contractParams\")\n        .then((response) => (this.requests = response.data));\n      this.contractParam = json;\n     \n    },\n\n    async fetchProductList() {\n      const json = await axios\n        .get(\"/products\")\n        .then((response) => (this.requests = response.data));  \n        this.products = json;      \n      json.forEach((element) =>\n        this.productList.push({ value: element.id, text: element.name })\n      );\n    },\n    async fetchSeasonalities() {\n      const json = await axios\n        .get(\"/seasons\")\n        .then((response) => (this.seasons = response.data));\n    },\n    onGridReady(params) {\n      params.api.sizeColumnsToFit();\n      window.addEventListener(\"resize\", function () {\n        setTimeout(function () {\n          params.api.sizeColumnsToFit();\n        });\n      });\n\n      params.api.sizeColumnsToFit();\n    },\n    async findProducerByAbr(arg) {\n      const json = await axios\n        .get(\"/producers/abr/\" + arg)\n        .then((response) => (this.requests = response.data));\n\n      return json;\n    },\n\n    async changeProducer(arg) {\n      if (this.showUserBoard) {\n        arg = await this.findProducerByAbr(this.currentUser.username).Id;\n      }\n\n      if (arg) {\n        const json = await axios\n          .get(\"/products/producer/\" + arg)\n          .then((response) => (this.requests = response.data))\n          .then((rowData) => (this.rowData = rowData));\n        this.producerId = arg;\n        this.productsByProducer = json;\n        this.selectedProducer = this.producerId;\n      }\n    },\n\n    async addProductClick() {\n      if (this.selectedProducer == null) {\n        this.$bvToast.toast(\"Veuillez choisir un producteur...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else if (this.selectedProduct == null) {\n        this.$bvToast.toast(\"Veuillez choisir un produit...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else {\n        await axios\n          .post(\n            \"/producers/\" +\n              this.selectedProducer +\n              \"/product/\" +\n              this.selectedProduct\n          )\n          .then((response) => (this.requests = response.data));\n        const json = await axios\n          .get(\"/products/producer/\" + this.selectedProducer)\n          .then((response) => (this.products = response.data))\n          .then((rowData) => (this.rowData = rowData));\n      \n        this.productsByProducer = json;\n      \n      }\n    },\n    onCellClicked(params) {\n      if (params.column.colId == \"name\") {       \n        this.productDetail = this.products[params.data.id - 1];\n        this.$root.$emit(\"bv::show::modal\", \"product-detail-modal\", \"#btnShow\");\n      }\n    },\n  },\n\n  beforeMount() {\n \n    this.gridOptions = {\n      async onCellValueChanged (event) {\n      \n       const json = await axios\n          .post(\n            \"/products/\" +\n              event.data.id +\n              \"/producer/\" +\n              event.data.producers[0].id,\n            event.data\n          )\n          .then((response) => (this.requests = response.data));\n          this.producerProducts = json.producerProducts;\n      },\n    };\n\n    this.columnDefs = [\n      {\n        headerName: \"Légumes\",\n        field: \"name\",\n        width: 150,\n        sortable: true,\n        pinned: \"left\",\n      },\n      {\n        headerName: \"Condit#\",\n        field: \"name\",\n        width: 60,\n        pinned: \"left\",\n        valueGetter: function (params) {\n          if (params.data.packaging.name != null) {\n            return params.data.packaging.name;\n          }\n        },\n      },\n      {\n        headerName: \"Prix\",\n        field: \"price\",\n        valueGetter: function (params) {\n          if (params.data.price != null) {\n            return params.data.price + \"€\";\n          }\n        },\n        width: 50,\n        pinned: \"left\",\n      },\n      {\n        field: \"quantity1\",\n        headerName: \"Jan\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleJan,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity1;\n          }\n        },\n        valueSetter: function (params) {          \n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (valueChanged) {\n            if (!params.data.currentRealQuantity) {\n              params.data.currentRealQuantity = {\n                id: params.data.id,\n                quantity1: newValInt                \n              };\n            } else {\n              params.data.currentRealQuantity.quantity1 = newValInt;\n            }\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity2\",\n        headerName: \"Fév\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleFeb,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity2;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (params.data.b !== newValInt) {\n            if (!params.data.currentRealQuantity) {\n              params.data.currentRealQuantity = {\n                id: params.data.id,\n                quantity2: newValInt,\n              };\n            } else {\n              params.data.currentRealQuantity.quantity2 = newValInt;\n            }\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity3\",\n        headerName: \"Mar\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleMar,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity3;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity3: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity3 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity4\",\n        headerName: \"Avr\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleApr,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity4;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity4: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity4 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity5\",\n        headerName: \"Mai\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleMay,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity5;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity5: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity5 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity6\",\n        headerName: \"Juin\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleJun,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity6;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity6: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity6 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity7\",\n        headerName: \"Juil\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleJul,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity7;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity7: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity7 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity8\",\n        headerName: \"Aou\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleAug,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity8;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity8: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity8 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity9\",\n        headerName: \"Sep\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleSep,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity9;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity9: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity9 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity10\",\n        headerName: \"Oct\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleOct,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity10;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity10: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity10 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity11\",\n        headerName: \"Nov\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleNov,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity11;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity11: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity11 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity12\",\n        headerName: \"Dec\",\n        editable: true,\n        valueParser: numberParser,\n        cellStyle: cellStyleDec,\n        valueGetter: function (params) {\n          if (params.data.currentRealQuantity) {\n            return params.data.currentRealQuantity.quantity12;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (!params.data.currentRealQuantity) {\n            params.data.currentRealQuantity = {\n              id: params.data.id,\n              quantity12: newValInt,\n            };\n          } else {\n            params.data.currentRealQuantity.quantity12 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        headerName: \"Qte Tot\",\n        width: 90,\n        pinned: \"right\",\n        valueGetter: function (params) {\n          if (!params.data.currentRealQuantity) return 0;\n          return (\n            (params.data.currentRealQuantity.quantity1 || 0) +\n            (params.data.currentRealQuantity.quantity2 || 0) +\n            (params.data.currentRealQuantity.quantity3 || 0) +\n            (params.data.currentRealQuantity.quantity4 || 0) +\n            (params.data.currentRealQuantity.quantity5 || 0) +\n            (params.data.currentRealQuantity.quantity6 || 0) +\n            (params.data.currentRealQuantity.quantity7 || 0) +\n            (params.data.currentRealQuantity.quantity8 || 0) +\n            (params.data.currentRealQuantity.quantity9 || 0) +\n            (params.data.currentRealQuantity.quantity10 || 0) +\n            (params.data.currentRealQuantity.quantity11 || 0) +\n            (params.data.currentRealQuantity.quantity12 || 0)\n          );\n        },\n      },\n\n      {\n        headerName: \"Prix Tot\",\n        width: 90,\n        pinned: \"right\",\n        valueGetter: function (params) {\n          if (!params.data.currentRealQuantity) return 0;\n          return (\n            (\n              (params.data.currentRealQuantity.quantity1 *\n                params.data.price *\n                params.data.seasonalityProduct.january || 0) +\n              (params.data.currentRealQuantity.quantity2 *\n                params.data.price *\n                params.data.seasonalityProduct.february || 0) +\n              (params.data.currentRealQuantity.quantity3 *\n                params.data.price *\n                params.data.seasonalityProduct.march || 0) +\n              (params.data.currentRealQuantity.quantity4 *\n                params.data.price *\n                params.data.seasonalityProduct.april || 0) +\n              (params.data.currentRealQuantity.quantity5 *\n                params.data.price *\n                params.data.seasonalityProduct.may || 0) +\n              (params.data.currentRealQuantity.quantity6 *\n                params.data.price *\n                params.data.seasonalityProduct.june || 0) +\n              (params.data.currentRealQuantity.quantity7 *\n                params.data.price *\n                params.data.seasonalityProduct.july || 0) +\n              (params.data.currentRealQuantity.quantity8 *\n                params.data.price *\n                params.data.seasonalityProduct.august || 0) +\n              (params.data.currentRealQuantity.quantity9 *\n                params.data.price *\n                params.data.seasonalityProduct.september || 0) +\n              (params.data.currentRealQuantity.quantity10 *\n                params.data.price *\n                params.data.seasonalityProduct.october || 0) +\n              (params.data.currentRealQuantity.quantity11 *\n                params.data.price *\n                params.data.seasonalityProduct.november || 0) +\n              (params.data.currentRealQuantity.quantity12 *\n                params.data.price *\n                params.data.seasonalityProduct.december || 0)\n            ).toFixed(2) + \"€\"\n          );\n        },\n      },\n    ];\n    axios\n      .get(\"/products/producer/0\")\n      .then((response) => (this.products = response.data))\n      .then((rowData) => (this.rowData = rowData));\n  },\n};\nwindow.numberParser = function numberParser(params) {\n  return Number(params.newValue);\n};\n\nwindow.cellStyleJan = function cellStyleJan(params) {\n  const color = numberToColor(params.data.seasonalityProduct.january);\n  return { backgroundColor: color };\n};\n\nwindow.cellStyleFeb = function cellStyleFeb(params) {\n  const color = numberToColor(params.data.seasonalityProduct.february);\n  return { backgroundColor: color };\n};\nwindow.cellStyleMar = function cellStyleMar(params) {\n  const color = numberToColor(params.data.seasonalityProduct.mars);\n  return { backgroundColor: color };\n};\nwindow.cellStyleApr = function cellStyleApr(params) {\n  const color = numberToColor(params.data.seasonalityProduct.april);\n  return { backgroundColor: color };\n};\nwindow.cellStyleMay = function cellStyleMay(params) {\n  const color = numberToColor(params.data.seasonalityProduct.may);\n  return { backgroundColor: color };\n};\nwindow.cellStyleJun = function cellStyleJun(params) {\n  const color = numberToColor(params.data.seasonalityProduct.june);\n  return { backgroundColor: color };\n};\nwindow.cellStyleJul = function cellStyleJul(params) {\n  const color = numberToColor(params.data.seasonalityProduct.july);\n  return { backgroundColor: color };\n};\nwindow.cellStyleAug = function cellStyleAug(params) {\n  const color = numberToColor(params.data.seasonalityProduct.august);\n  return { backgroundColor: color };\n};\nwindow.cellStyleSep = function cellStyleSep(params) {\n  const color = numberToColor(params.data.seasonalityProduct.september);\n  return { backgroundColor: color };\n};\nwindow.cellStyleOct = function cellStyleOct(params) {\n  const color = numberToColor(params.data.seasonalityProduct.october);\n  return { backgroundColor: color };\n};\nwindow.cellStyleNov = function cellStyleNov(params) {\n  const color = numberToColor(params.data.seasonalityProduct.november);\n  return { backgroundColor: color };\n};\nwindow.cellStyleDec = function cellStyleDec(params) {\n  const color = numberToColor(params.data.seasonalityProduct.december);\n  return { backgroundColor: color };\n};\n\nwindow.numberToColor = function numberToColor(val) {\n  if (val === 0) {\n    return \"#fff\";\n  } else if (val == 1) {\n    return \"#28a745\";\n  } else if (val == 2) {\n    return \"#17a2b8\";\n  } else {\n    return \"#ffc107\";\n  }\n};\n</script>\n\n<style>\n.ag-theme-alpine .ag-header-cell,\n.ag-theme-alpine .ag-header-group-cell {\n  margin-left: 5px;\n  padding-left: 5px;\n  padding-right: 3px;\n}\n\n.ag-theme-alpine .ag-cell,\n.ag-theme-alpine .ag-full-width-row .ag-cell-wrapper.ag-row-group {\n  margin-left: 0px;\n  padding-left: 5px;\n  padding-right: 3px;\n}\n\n.my-legend {\n  height: 50px;\n}\n\n#my-legend .legend-title {\n  text-align: left;\n\n  font-weight: bold;\n  font-size: 90%;\n}\n#my-legend ul {\n  float: left;\n  list-style: none;\n}\n#my-legend ul li {\n  list-style: none;\n\n  margin-left: 5px;\n}\n#my-legend ul li span {\n  float: left;\n  height: 16px;\n  width: 30px;\n  margin-right: 5px;\n\n  border: 1px solid #999;\n}\n\n.card-body {\n  padding: 0.4rem;\n  font-size: 80%;\n}\n</style>"]}]}