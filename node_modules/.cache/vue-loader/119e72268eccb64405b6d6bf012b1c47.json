{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Request.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Request.vue","mtime":1627544087156},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFJlcXVlc3RNb2RhbCBmcm9tICIuLi9jb21wb25lbnRzL0FkZFByb2R1Y2VyTW9kYWwudnVlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7ICAgCiAgICAicmVxdWVzdC1tb2RhbCI6IFJlcXVlc3RNb2RhbCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOlt7bmFtZToiIiwgcXVhbnRpdHk6IDAsIHN0YXJ0UGVyaW9kOiBudWxsLCBlbmRQZXJpb2Q6IG51bGx9XSwKICAgICAgY3VycmVudE1vbnRoOiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6eyAKICAuLi5tYXBHZXR0ZXJzKFsicmVxdWVzdHMiXSkKICAgIH0sCiAgbW91bnRlZCgpIHsgCiAgICB0aGlzLmZldGNoUmVxdWVzdHMoKTsKICAgIHRoaXMuY3VycmVudE1vbnRoID0gdGhpcy5nZXRDdXJyZW50TW9udGgoKTsKICAgCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaFJlcXVlc3RzKCl7ICAgCiAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImZldGNoUmVxdWVzdHMiLHttb250aCA6IHRoaXMuZ2V0Q3VycmVudE1vbnRoKCl9KTsgCiAgICB9LAoKICAgIGdldEN1cnJlbnRNb250aDogZnVuY3Rpb24oKXsgICAgCiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICByZXR1cm4gZGF0ZS5nZXRNb250aCgpOwogICAgfSwKICAgIGdldE1vbnRoTmFtZTogZnVuY3Rpb24oaW5kZXgpIHsKCiAgICAgIGNvbnN0IG1vbnRocyAgICA9IFsnSmFudmllcicsJ0bDqXZyaWVyJywnTWFycycsJ0F2cmlsJywnTWFpJywnSnVpbicsJ0p1aWxsZXQnLCdBb8O7dCcsJ1NlcHRlbWJyZScsJ09jdG9icmUnLCdOb3ZlbWJyZScsJ0TDqWNlbWJyZSddOwogICAgCiAgICAgIHJldHVybiBtb250aHNbaW5kZXhdOwogICAgfSwKICAgIHNldE5leHRNb250aCgpewogICAgICB0aGlzLmN1cnJlbnRNb250aCA9IHRoaXMuY3VycmVudE1vbnRoICsgMTsKICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJmZXRjaFJlcXVlc3RzIix7bW9udGggOiB0aGlzLmN1cnJlbnRNb250aH0pOwogICAgfSwKICAgIHNldFByZXZpb3VzTW9udGgoKXsKICAgICAgdGhpcy5jdXJyZW50TW9udGggPSB0aGlzLmN1cnJlbnRNb250aCAtIDE7CiAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZmV0Y2hSZXF1ZXN0cyIse21vbnRoIDogdGhpcy5jdXJyZW50TW9udGh9KTsKICAgIH0sCgogICAgb25DbGljazogZnVuY3Rpb24gKGFyZykgewogICAgICB0aGlzLiRyb290LiRlbWl0KCJidjo6c2hvdzo6bW9kYWwiLCAibW9kYWwtcmVxdWVzdCIsICIjYnRuU2hvdyIpOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24ocmVxdWVzdCl7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVSZXF1ZXN0Iix7cmVxdWVzdCA6IHJlcXVlc3R9KTsgIAogICAgfQogIAogIH0KfTsK"},{"version":3,"sources":["Request.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Request.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <b-container fluid>\n    <b-row>\n      <b-col class=\"col-md-12 col-sm-12 col-xs-12\">\n        <div>\n        <h3> <b-icon @click.prevent=\"setPreviousMonth()\" icon=\"caret-left\" aria-hidden=\"true\"></b-icon> \n              Demandes pour {{getMonthName(currentMonth)}}  \n              <b-icon @click.prevent=\"setNextMonth()\" icon=\"caret-right\" aria-hidden=\"true\"></b-icon>\n        </h3>\n  \n        </div>\n        <br>\n        <div align=\"left\" v-for=\"request in requests\" :key=\"request.id\">\n            {{ request.name }} : {{ request.quantity }} {{ request.unit }}\n            <b-icon @click.prevent=\"remove(request)\" icon=\"trash\" aria-hidden=\"true\"></b-icon>\n        </div>\n       \n      \n       <b-button class=\"m-3\" @click=\"onClick\" variant=\"primary\"\n              >Ajouter une demande</b-button\n            >\n             <request-modal></request-modal>\n      </b-col>\n    </b-row>\n     \n  </b-container>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport RequestModal from \"../components/AddProducerModal.vue\";\n\nexport default {\n  components: {   \n    \"request-modal\": RequestModal,\n  },\n  data() {\n    return {\n      form:[{name:\"\", quantity: 0, startPeriod: null, endPeriod: null}],\n      currentMonth: 0\n    };\n  },\n  computed:{ \n  ...mapGetters([\"requests\"])\n    },\n  mounted() { \n    this.fetchRequests();\n    this.currentMonth = this.getCurrentMonth();\n   \n  },\n  methods: {\n    async fetchRequests(){   \n     await this.$store.dispatch(\"fetchRequests\",{month : this.getCurrentMonth()}); \n    },\n\n    getCurrentMonth: function(){    \n      const date = new Date();\n      return date.getMonth();\n    },\n    getMonthName: function(index) {\n\n      const months    = ['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre'];\n    \n      return months[index];\n    },\n    setNextMonth(){\n      this.currentMonth = this.currentMonth + 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n    setPreviousMonth(){\n      this.currentMonth = this.currentMonth - 1;\n       this.$store.dispatch(\"fetchRequests\",{month : this.currentMonth});\n    },\n\n    onClick: function (arg) {\n      this.$root.$emit(\"bv::show::modal\", \"modal-request\", \"#btnShow\");\n    },\n    remove: function(request){\n      this.$store.dispatch(\"deleteRequest\",{request : request});  \n    }\n  \n  }\n};\n</script>\n\n<style>\n</style>"]}]}