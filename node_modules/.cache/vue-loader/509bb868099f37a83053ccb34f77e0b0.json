{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Producer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Producer.vue","mtime":1634217196878},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFnR3JpZFZ1ZSB9IGZyb20gIkBhZy1ncmlkLWNvbW11bml0eS92dWUiOwppbXBvcnQgImFnLWdyaWQtY29tbXVuaXR5L2Rpc3Qvc3R5bGVzL2FnLWdyaWQuY3NzIjsKaW1wb3J0ICJhZy1ncmlkLWNvbW11bml0eS9kaXN0L3N0eWxlcy9hZy10aGVtZS1hbHBpbmUuY3NzIjsKaW1wb3J0IHsgQWxsQ29tbXVuaXR5TW9kdWxlcyB9IGZyb20gIkBhZy1ncmlkLWNvbW11bml0eS9hbGwtbW9kdWxlcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBqc1BERiBmcm9tICJqc3BkZiI7CmltcG9ydCBKc1BERkF1dG90YWJsZSBmcm9tICJqc3BkZi1hdXRvdGFibGUiOwoKY29uc3QgVE9UQUxfQ09MT1IgPSAiI2NjZmZiMyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkUHJvZHVjZXI6IG51bGwsCiAgICAgIHNlbGVjdGVkUHJvZHVjdDogbnVsbCwKICAgICAgcHJvZHVjZXJzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIkNob2lzaXIgdW4gcHJvZHVjdGV1ci4uLiIgfV0sCiAgICAgIHByb2R1Y3RMaXN0OiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIkNob2lzaXIgdW4gcHJvZHVpdC4uLiIgfV0sCiAgICAgIGdyaWRPcHRpb25zOiBudWxsLAogICAgICBncmlkQXBpOiBudWxsLAogICAgICBjb2x1bW5BcGk6IG51bGwsCiAgICAgIHJvd0RhdGE6IG51bGwsCiAgICAgIGNvbHVtbkRlZnM6IG51bGwsCiAgICAgIG1vZHVsZXM6IEFsbENvbW11bml0eU1vZHVsZXMsCiAgICAgIHByb2R1Y2VySWQ6IG51bGwsCiAgICAgIHByb2R1Y3RzQnlQcm9kdWNlcjogW10sCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQWdHcmlkVnVlLAogICAgSnNQREZBdXRvdGFibGUsCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaFByb2R1Y2VycygpOwogICAgdGhpcy5mZXRjaFByb2R1Y3RMaXN0KCk7CiAgICB0aGlzLmdyaWRBcGkgPSB0aGlzLmdyaWRPcHRpb25zLmFwaTsKICAgIHRoaXMuZ3JpZENvbHVtbkFwaSA9IHRoaXMuZ3JpZE9wdGlvbnMuY29sdW1uQXBpOwogIH0sCiAgbWV0aG9kczogewogICAgZmluZFByb2R1Y2VyTmFtZShpZCkgewogICAgICB0aGlzLnByb2R1Y2Vycy5maW5kKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT09IGlkKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS50ZXh0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGRvd25sb2FkUERGKCkgewogICAgICBjb25zdCBkb2MgPSBuZXcganNQREYoKTsKICAgICAgZG9jLnRleHQoIkNvbnRyYXQgTWFyYWljaGFnZSIsIDEwLCAxMCk7CgogICAgICBkb2MubGluZSgwLCAzNSwgNDAwLCAzNSk7CiAgICAgIGxldCByb3dzID0gW107CiAgICAgIHRoaXMucHJvZHVjdHNCeVByb2R1Y2VyLmZvckVhY2goKGVsZW1lbnQpID0+IHsKICAgICAgICBpZiAoZWxlbWVudC5yZWFsUXVhbnRpdGllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IFsKICAgICAgICAgICAgZWxlbWVudC5uYW1lLAogICAgICAgICAgICBlbGVtZW50LnByaWNlICsgIuKCrCIsCiAgICAgICAgICAgIGVsZW1lbnQucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk2LAogICAgICAgICAgICBlbGVtZW50LnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5NywKICAgICAgICAgICAgZWxlbWVudC5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTgsCiAgICAgICAgICAgIGVsZW1lbnQucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk5LAogICAgICAgICAgICBlbGVtZW50LnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MTAsCiAgICAgICAgICAgIGVsZW1lbnQucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMSwKICAgICAgICAgICAgZWxlbWVudC5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTEyLAogICAgICAgICAgICBlbGVtZW50LnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MSwKICAgICAgICAgICAgZWxlbWVudC5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTIsCiAgICAgICAgICBdOwogICAgICAgICAgcm93cy5wdXNoKHRlbXApOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBKc1BERkF1dG90YWJsZShkb2MsIHsKICAgICAgICBoZWFkOiBbCiAgICAgICAgICBbCiAgICAgICAgICAgICJMw6lndW1lIiwKICAgICAgICAgICAgIlByaXgiLAogICAgICAgICAgICAiTWFpIiwKICAgICAgICAgICAgIkp1aSIsCiAgICAgICAgICAgICJKdWwiLAogICAgICAgICAgICAiQW91IiwKICAgICAgICAgICAgIlNlcCIsCiAgICAgICAgICAgICJPY3QiLAogICAgICAgICAgICAiTm92IiwKICAgICAgICAgICAgIkRlYyIsCiAgICAgICAgICAgICJKYW4iLAogICAgICAgICAgICAiRmV2IiwKICAgICAgICAgIF0sCiAgICAgICAgXSwKICAgICAgICBtYXJnaW46IHsgdG9wOiA1MCB9LAogICAgICAgIGJvZHk6IHJvd3MsCiAgICAgIH0pLAogICAgICAgIGRvYy5zYXZlKAogICAgICAgICAgIkNvbnRyYXRfIiArCiAgICAgICAgICAgIHRoaXMucHJvZHVjZXJzLmZpbmQoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gdGhpcy5wcm9kdWNlcklkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRleHQgKwogICAgICAgICAgICAiLnBkZiIKICAgICAgICApOwogICAgfSwKCiAgICBhc3luYyBmZXRjaFByb2R1Y2VycygpIHsKICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgLmdldCgiL3Byb2R1Y2VycyIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAganNvbi5mb3JFYWNoKChlbGVtZW50KSA9PgogICAgICAgIHRoaXMucHJvZHVjZXJzLnB1c2goeyB2YWx1ZTogZWxlbWVudC5pZCwgdGV4dDogZWxlbWVudC5hYnIgfSkKICAgICAgKTsKICAgIH0sCgogICAgYXN5bmMgZmV0Y2hQcm9kdWN0TGlzdCgpIHsKICAgICAgY29uc3QganNvbiA9IGF3YWl0IGF4aW9zCiAgICAgICAgLmdldCgiL3Byb2R1Y3RzIikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpOwogICAgICBqc29uLmZvckVhY2goKGVsZW1lbnQpID0+CiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdC5wdXNoKHsgdmFsdWU6IGVsZW1lbnQuaWQsIHRleHQ6IGVsZW1lbnQubmFtZSB9KQogICAgICApOwogICAgfSwKICAgIG9uR3JpZFJlYWR5KHBhcmFtcykgewogICAgICBwYXJhbXMuYXBpLnNpemVDb2x1bW5zVG9GaXQoKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHBhcmFtcy5hcGkuc2l6ZUNvbHVtbnNUb0ZpdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIHBhcmFtcy5hcGkuc2l6ZUNvbHVtbnNUb0ZpdCgpOwogICAgfSwKICAgIGFzeW5jIGNoYW5nZVByb2R1Y2VyKGFyZykgewogICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAuZ2V0KCIvcHJvZHVjdHMvcHJvZHVjZXIvIiArIGFyZykKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpCiAgICAgICAgLnRoZW4oKHJvd0RhdGEpID0+ICh0aGlzLnJvd0RhdGEgPSByb3dEYXRhKSk7CiAgICAgIHRoaXMucHJvZHVjZXJJZCA9IGFyZzsKICAgICAgdGhpcy5wcm9kdWN0c0J5UHJvZHVjZXIgPSBqc29uOwogICAgfSwKCiAgICBhZGRQcm9kdWNlckNsaWNrKCkgewogICAgICB0aGlzLiRyb290LiRlbWl0KCJidjo6c2hvdzo6bW9kYWwiLCAibW9kYWwtYWRkcHJvZHVjZXIiLCAiI2J0blNob3ciKTsKICAgIH0sCgogICAgYXN5bmMgYWRkUHJvZHVjdENsaWNrKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RlZFByb2R1Y2VyID09IG51bGwpIHsKICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCJWZXVpbGxleiBjaG9pc2lyIHVuIHByb2R1Y3RldXIuLi4iLCB7CiAgICAgICAgICB0aXRsZTogIkluZm8iLAogICAgICAgICAgdmFyaWFudDogImRhbmdlciIsCiAgICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUHJvZHVjdCA9PSBudWxsKSB7CiAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgiVmV1aWxsZXogY2hvaXNpciB1biBwcm9kdWl0Li4uIiwgewogICAgICAgICAgdGl0bGU6ICJJbmZvIiwKICAgICAgICAgIHZhcmlhbnQ6ICJkYW5nZXIiLAogICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgIC5wb3N0KAogICAgICAgICAgICAiL3Byb2R1Y2Vycy8iICsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZHVjZXIgKwogICAgICAgICAgICAgICIvcHJvZHVjdC8iICsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUHJvZHVjdAogICAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICBhd2FpdCBheGlvcwogICAgICAgICAgLmdldCgiL3Byb2R1Y3RzL3Byb2R1Y2VyLyIgKyB0aGlzLnNlbGVjdGVkUHJvZHVjZXIpCiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YSkpCiAgICAgICAgICAudGhlbigocm93RGF0YSkgPT4gKHRoaXMucm93RGF0YSA9IHJvd0RhdGEpKTsKICAgICAgfQogICAgfSwKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuZ3JpZE9wdGlvbnMgPSB7CiAgICAgIG9uQ2VsbFZhbHVlQ2hhbmdlZDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wdXQoCiAgICAgICAgICAgICIvcHJvZHVjdHMvIiArIGV2ZW50LmRhdGEuaWQgKyAiL3Byb2R1Y2VyLyIgKyBldmVudC5kYXRhLnByb2R1Y2VySWQsCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICBpZDogZXZlbnQuZGF0YS5pZCwKICAgICAgICAgICAgICBuYW1lOiBldmVudC5kYXRhLm5hbWUsCiAgICAgICAgICAgICAgcGFja2FnaW5nOiBldmVudC5kYXRhLnBhY2thZ2luZywKICAgICAgICAgICAgICByZWFsUXVhbnRpdGllczogZXZlbnQuZGF0YS5yZWFsUXVhbnRpdGllcywKICAgICAgICAgICAgICBwcmljZTogZXZlbnQuZGF0YS5wcmljZSwKICAgICAgICAgICAgfSkKICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gKHRoaXMucmVxdWVzdHMgPSByZXNwb25zZS5kYXRhKSk7CiAgICAgIH0sCiAgICB9OwogICAgdGhpcy5jb2x1bW5EZWZzID0gWwogICAgICB7CiAgICAgICAgaGVhZGVyTmFtZTogIkzDqWd1bWVzIiwKICAgICAgICBmaWVsZDogIm5hbWUiLAogICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgcGlubmVkOiAibGVmdCIsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiQ29uZGl0IyIsCiAgICAgICAgZmllbGQ6ICJuYW1lIiwKICAgICAgICB3aWR0aDogMTAwLAogICAgICAgIHBpbm5lZDogImxlZnQiLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEucGFja2FnaW5nLm5hbWUgIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEucGFja2FnaW5nLm5hbWU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgfSwKICAgICAgewogICAgICAgIGhlYWRlck5hbWU6ICJQcml4IiwKICAgICAgICBmaWVsZDogInByaWNlIiwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLnByaWNlICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLnByaWNlICsgIuKCrCI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogMTAwLAogICAgICAgIHBpbm5lZDogImxlZnQiLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTUiLAogICAgICAgIGhlYWRlck5hbWU6ICJNYWkiLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVNldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKHZhbHVlQ2hhbmdlZCkgewogICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID0gewogICAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgICAgcXVhbnRpdHk1OiBuZXdWYWxJbnQsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTUgPSBuZXdWYWxJbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5NiIsCiAgICAgICAgaGVhZGVyTmFtZTogIkp1aSIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5NjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAodmFsdWVDaGFuZ2VkKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPSB7CiAgICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgICBxdWFudGl0eTY6IG5ld1ZhbEludCwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5NiA9IG5ld1ZhbEludDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHk3IiwKICAgICAgICBoZWFkZXJOYW1lOiAiSnVsIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk3OwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTc6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5NyA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5OCIsCiAgICAgICAgaGVhZGVyTmFtZTogIkFvdSIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5ODsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSA9IHsKICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgcXVhbnRpdHk4OiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTggPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTkiLAogICAgICAgIGhlYWRlck5hbWU6ICJTZXAiLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVNldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPSB7CiAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgIHF1YW50aXR5OTogbmV3VmFsSW50LAogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk5ID0gbmV3VmFsSW50OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHkxMCIsCiAgICAgICAgaGVhZGVyTmFtZTogIk9jdCIsCiAgICAgICAgZWRpdGFibGU6IHRydWUsCiAgICAgICAgdmFsdWVQYXJzZXI6IG51bWJlclBhcnNlciwKICAgICAgICB2YWx1ZUdldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MTA7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVNldHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgdmFyIG5ld1ZhbEludCA9IHBhcnNlSW50KHBhcmFtcy5uZXdWYWx1ZSk7CiAgICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gcGFyYW1zLmRhdGEuYiAhPT0gbmV3VmFsSW50OwogICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPSB7CiAgICAgICAgICAgICAgaWQ6IHBhcmFtcy5kYXRhLmlkLAogICAgICAgICAgICAgIHF1YW50aXR5MTA6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MTAgPSBuZXdWYWxJbnQ7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdmFsdWVDaGFuZ2VkOwogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IDcwLAogICAgICB9LAogICAgICB7CiAgICAgICAgZmllbGQ6ICJxdWFudGl0eTExIiwKICAgICAgICBoZWFkZXJOYW1lOiAiTm92IiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHZhbHVlU2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgbmV3VmFsSW50ID0gcGFyc2VJbnQocGFyYW1zLm5ld1ZhbHVlKTsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBwYXJhbXMuZGF0YS5iICE9PSBuZXdWYWxJbnQ7CiAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID09PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSA9IHsKICAgICAgICAgICAgICBpZDogcGFyYW1zLmRhdGEuaWQsCiAgICAgICAgICAgICAgcXVhbnRpdHkxMTogbmV3VmFsSW50LAogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMSA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmaWVsZDogInF1YW50aXR5MTIiLAogICAgICAgIGhlYWRlck5hbWU6ICJEZWMiLAogICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlUGFyc2VyOiBudW1iZXJQYXJzZXIsCiAgICAgICAgdmFsdWVHZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIGlmIChwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXSAhPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTEyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTEyOiBuZXdWYWxJbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTEyID0gbmV3VmFsSW50OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHkxIiwKICAgICAgICBoZWFkZXJOYW1lOiAiSmFuIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkxOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTE6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MSA9IG5ld1ZhbEludDsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAuZ2V0KCIvcHJvZHVjdHMvcHJvZHVjZXIvMCIpCiAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgICAgICAgIC50aGVuKChyb3dEYXRhKSA9PiAodGhpcy5yb3dEYXRhID0gcm93RGF0YSkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHZhbHVlQ2hhbmdlZDsKICAgICAgICB9LAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgfSwKICAgICAgewogICAgICAgIGZpZWxkOiAicXVhbnRpdHkyIiwKICAgICAgICBoZWFkZXJOYW1lOiAiRmV2IiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZVBhcnNlcjogbnVtYmVyUGFyc2VyLAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdmFsdWVTZXR0ZXI6IGZ1bmN0aW9uIChwYXJhbXMpIHsKICAgICAgICAgIHZhciBuZXdWYWxJbnQgPSBwYXJzZUludChwYXJhbXMubmV3VmFsdWUpOwogICAgICAgICAgdmFyIHZhbHVlQ2hhbmdlZCA9IHBhcmFtcy5kYXRhLmIgIT09IG5ld1ZhbEludDsKICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5nZXQoIi9wcm9kdWN0cy9wcm9kdWNlci8wIikKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgICAgICAudGhlbigocm93RGF0YSkgPT4gKHRoaXMucm93RGF0YSA9IHJvd0RhdGEpKTsKICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbMF0gPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdID0gewogICAgICAgICAgICAgIGlkOiBwYXJhbXMuZGF0YS5pZCwKICAgICAgICAgICAgICBxdWFudGl0eTI6IG5ld1ZhbEludCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MiA9IG5ld1ZhbEludDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZUNoYW5nZWQ7CiAgICAgICAgfSwKICAgICAgICB3aWR0aDogNzAsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiUsOpZWwiLAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgICBjZWxsU3R5bGU6IHsgImJhY2tncm91bmQtY29sb3IiOiBUT1RBTF9DT0xPUiB9LAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgc3VtID0gMDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3VtICs9CiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHkxICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTIgKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5MyArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHk0ICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTUgKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5NiArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHk3ICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTggKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5OSArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHkxMDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdW07CiAgICAgICAgfSwKICAgICAgfSwKCiAgICAgIHsKICAgICAgICBoZWFkZXJOYW1lOiAiUsOpZWwiLAogICAgICAgIHdpZHRoOiA3MCwKICAgICAgICBjZWxsU3R5bGU6IHsgImJhY2tncm91bmQtY29sb3IiOiBUT1RBTF9DT0xPUiB9LAogICAgICAgIHZhbHVlR2V0dGVyOiBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICB2YXIgc3VtID0gMDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3VtICs9CiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHkxICogcGFyYW1zLmRhdGEucHJpY2UgKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5MiAqIHBhcmFtcy5kYXRhLnByaWNlICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTMgKiBwYXJhbXMuZGF0YS5wcmljZSArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHk0ICogcGFyYW1zLmRhdGEucHJpY2UgKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5NSAqIHBhcmFtcy5kYXRhLnByaWNlICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTYgKiBwYXJhbXMuZGF0YS5wcmljZSArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHk3ICogcGFyYW1zLmRhdGEucHJpY2UgKwogICAgICAgICAgICAgIHBhcmFtcy5kYXRhLnJlYWxRdWFudGl0aWVzW2ldLnF1YW50aXR5OCAqIHBhcmFtcy5kYXRhLnByaWNlICsKICAgICAgICAgICAgICBwYXJhbXMuZGF0YS5yZWFsUXVhbnRpdGllc1tpXS5xdWFudGl0eTkgKiBwYXJhbXMuZGF0YS5wcmljZSArCiAgICAgICAgICAgICAgcGFyYW1zLmRhdGEucmVhbFF1YW50aXRpZXNbaV0ucXVhbnRpdHkxMCAqIHBhcmFtcy5kYXRhLnByaWNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN1bSArICLigqwiOwogICAgICAgIH0sCiAgICAgIH0sCiAgICBdOwogICAgYXhpb3MKICAgICAgLmdldCgiL3Byb2R1Y3RzL3Byb2R1Y2VyLzAiKQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YSkpCiAgICAgIC50aGVuKChyb3dEYXRhKSA9PiAodGhpcy5yb3dEYXRhID0gcm93RGF0YSkpOwogIH0sCn07CndpbmRvdy5udW1iZXJQYXJzZXIgPSBmdW5jdGlvbiBudW1iZXJQYXJzZXIocGFyYW1zKSB7CiAgcmV0dXJuIE51bWJlcihwYXJhbXMubmV3VmFsdWUpOwp9Owo="},{"version":3,"sources":["Producer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Producer.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div style=\"display: flex; flex-direction: column; height: 100%\">\n    <b-container>\n      <b-row\n        ><b-col cols=\"3\">\n          <b-form-select\n            v-model=\"selectedProducer\"\n            :options=\"producers\"\n            v-on:change=\"changeProducer\"\n            class=\"m-2\"\n          ></b-form-select>\n        </b-col>\n\n        <b-col cols=\"3\">\n          <b-form-select\n            v-model=\"selectedProduct\"\n            :options=\"productList\"\n            class=\"m-2\"\n          ></b-form-select>\n        </b-col>\n\n        <b-col cols=\"2\">\n          <b-button\n            variant=\"outline-primary\"\n            @click=\"addProductClick\"\n            class=\"m-2\"\n            >Associer Produit</b-button\n          >\n        </b-col>\n        <b-col cols=\"3\">\n          <b-button v-if=\"selectedProducer != null && selectedProducer != 0\"\n            variant=\"outline-primary\"\n            @click=\"downloadPDF\"\n            class=\"m-2\"\n            ><b-icon icon=\"download\" scale=\"1.3\" aria-hidden=\"true\"></b-icon\n            ></b-button>\n         \n          \n        </b-col>\n      </b-row>\n    </b-container>\n    <div style=\"flex: 1 1 auto\">\n      <ag-grid-vue\n        style=\"width: 100%; height: 100%\"\n        class=\"ag-theme-alpine\"\n        id=\"myGrid\"\n        :gridOptions=\"gridOptions\"\n        :rowData=\"rowData\"\n        :columnDefs=\"columnDefs\"\n        :modules=\"modules\"\n      ></ag-grid-vue>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { AgGridVue } from \"@ag-grid-community/vue\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-alpine.css\";\nimport { AllCommunityModules } from \"@ag-grid-community/all-modules\";\nimport axios from \"axios\";\nimport jsPDF from \"jspdf\";\nimport JsPDFAutotable from \"jspdf-autotable\";\n\nconst TOTAL_COLOR = \"#ccffb3\";\n\nexport default {\n  data() {\n    return {\n      selectedProducer: null,\n      selectedProduct: null,\n      producers: [{ value: null, text: \"Choisir un producteur...\" }],\n      productList: [{ value: null, text: \"Choisir un produit...\" }],\n      gridOptions: null,\n      gridApi: null,\n      columnApi: null,\n      rowData: null,\n      columnDefs: null,\n      modules: AllCommunityModules,\n      producerId: null,\n      productsByProducer: [],\n    };\n  },\n  components: {\n    AgGridVue,\n    JsPDFAutotable,\n  },\n  mounted() {\n    this.fetchProducers();\n    this.fetchProductList();\n    this.gridApi = this.gridOptions.api;\n    this.gridColumnApi = this.gridOptions.columnApi;\n  },\n  methods: {\n    findProducerName(id) {\n      this.producers.find((item) => {\n        if (item.value === id) {\n          return item.text;\n        }\n      });\n    },\n\n    downloadPDF() {\n      const doc = new jsPDF();\n      doc.text(\"Contrat Maraichage\", 10, 10);\n\n      doc.line(0, 35, 400, 35);\n      let rows = [];\n      this.productsByProducer.forEach((element) => {\n        if (element.realQuantities.length > 0) {\n          var temp = [\n            element.name,\n            element.price + \"€\",\n            element.realQuantities[0].quantity6,\n            element.realQuantities[0].quantity7,\n            element.realQuantities[0].quantity8,\n            element.realQuantities[0].quantity9,\n            element.realQuantities[0].quantity10,\n            element.realQuantities[0].quantity11,\n            element.realQuantities[0].quantity12,\n            element.realQuantities[0].quantity1,\n            element.realQuantities[0].quantity2,\n          ];\n          rows.push(temp);\n        }\n      });\n\n      JsPDFAutotable(doc, {\n        head: [\n          [\n            \"Légume\",\n            \"Prix\",\n            \"Mai\",\n            \"Jui\",\n            \"Jul\",\n            \"Aou\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n            \"Jan\",\n            \"Fev\",\n          ],\n        ],\n        margin: { top: 50 },\n        body: rows,\n      }),\n        doc.save(\n          \"Contrat_\" +\n            this.producers.find((item) => {\n              if (item.value === this.producerId) {\n                return item;\n              }\n            }).text +\n            \".pdf\"\n        );\n    },\n\n    async fetchProducers() {\n      const json = await axios\n        .get(\"/producers\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.producers.push({ value: element.id, text: element.abr })\n      );\n    },\n\n    async fetchProductList() {\n      const json = await axios\n        .get(\"/products\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.productList.push({ value: element.id, text: element.name })\n      );\n    },\n    onGridReady(params) {\n      params.api.sizeColumnsToFit();\n      window.addEventListener(\"resize\", function () {\n        setTimeout(function () {\n          params.api.sizeColumnsToFit();\n        });\n      });\n\n      params.api.sizeColumnsToFit();\n    },\n    async changeProducer(arg) {\n      const json = await axios\n        .get(\"/products/producer/\" + arg)\n        .then((response) => (this.requests = response.data))\n        .then((rowData) => (this.rowData = rowData));\n      this.producerId = arg;\n      this.productsByProducer = json;\n    },\n\n    addProducerClick() {\n      this.$root.$emit(\"bv::show::modal\", \"modal-addproducer\", \"#btnShow\");\n    },\n\n    async addProductClick() {\n      if (this.selectedProducer == null) {\n        this.$bvToast.toast(\"Veuillez choisir un producteur...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else if (this.selectedProduct == null) {\n        this.$bvToast.toast(\"Veuillez choisir un produit...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else {\n        await axios\n          .post(\n            \"/producers/\" +\n              this.selectedProducer +\n              \"/product/\" +\n              this.selectedProduct\n          )\n          .then((response) => (this.requests = response.data));\n        await axios\n          .get(\"/products/producer/\" + this.selectedProducer)\n          .then((response) => (this.products = response.data))\n          .then((rowData) => (this.rowData = rowData));\n      }\n    },\n  },\n\n  beforeMount() {\n    this.gridOptions = {\n      onCellValueChanged: function (event) {\n        axios\n          .put(\n            \"/products/\" + event.data.id + \"/producer/\" + event.data.producerId,\n            JSON.stringify({\n              id: event.data.id,\n              name: event.data.name,\n              packaging: event.data.packaging,\n              realQuantities: event.data.realQuantities,\n              price: event.data.price,\n            })\n          )\n          .then((response) => (this.requests = response.data));\n      },\n    };\n    this.columnDefs = [\n      {\n        headerName: \"Légumes\",\n        field: \"name\",\n        width: 200,\n        sortable: true,\n        pinned: \"left\",\n      },\n      {\n        headerName: \"Condit#\",\n        field: \"name\",\n        width: 100,\n        pinned: \"left\",\n        valueGetter: function (params) {\n          if (params.data.packaging.name != null) {\n            return params.data.packaging.name;\n          }\n        },\n      },\n      {\n        headerName: \"Prix\",\n        field: \"price\",\n        valueGetter: function (params) {\n          if (params.data.price != null) {\n            return params.data.price + \"€\";\n          }\n        },\n        width: 100,\n        pinned: \"left\",\n      },\n      {\n        field: \"quantity5\",\n        headerName: \"Mai\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity5;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (valueChanged) {\n            if (typeof params.data.realQuantities[0] === \"undefined\") {\n              params.data.realQuantities[0] = {\n                id: params.data.id,\n                quantity5: newValInt,\n              };\n            } else {\n              params.data.realQuantities[0].quantity5 = newValInt;\n            }\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity6\",\n        headerName: \"Jui\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity6;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (valueChanged) {\n            if (typeof params.data.realQuantities[0] === \"undefined\") {\n              params.data.realQuantities[0] = {\n                id: params.data.id,\n                quantity6: newValInt,\n              };\n            } else {\n              params.data.realQuantities[0].quantity6 = newValInt;\n            }\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity7\",\n        headerName: \"Jul\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity7;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity7: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity7 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity8\",\n        headerName: \"Aou\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity8;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity8: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity8 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity9\",\n        headerName: \"Sep\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity9;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity9: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity9 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity10\",\n        headerName: \"Oct\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity10;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity10: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity10 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity11\",\n        headerName: \"Nov\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity11;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity11: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity11 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity12\",\n        headerName: \"Dec\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity12;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity12: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity12 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity1\",\n        headerName: \"Jan\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity1;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity1: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity1 = newValInt;\n            axios\n              .get(\"/products/producer/0\")\n              .then((response) => (this.products = response.data))\n              .then((rowData) => (this.rowData = rowData));\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        field: \"quantity2\",\n        headerName: \"Fev\",\n        editable: true,\n        valueParser: numberParser,\n        valueGetter: function (params) {\n          if (params.data.realQuantities[0] != null) {\n            return params.data.realQuantities[0].quantity2;\n          }\n        },\n        valueSetter: function (params) {\n          var newValInt = parseInt(params.newValue);\n          var valueChanged = params.data.b !== newValInt;\n          axios\n            .get(\"/products/producer/0\")\n            .then((response) => (this.products = response.data))\n            .then((rowData) => (this.rowData = rowData));\n          if (typeof params.data.realQuantities[0] === \"undefined\") {\n            params.data.realQuantities[0] = {\n              id: params.data.id,\n              quantity2: newValInt,\n            };\n          } else {\n            params.data.realQuantities[0].quantity2 = newValInt;\n          }\n          return valueChanged;\n        },\n        width: 70,\n      },\n      {\n        headerName: \"Réel\",\n        width: 70,\n        cellStyle: { \"background-color\": TOTAL_COLOR },\n        valueGetter: function (params) {\n          var sum = 0;\n          for (let i = 0; i < params.data.realQuantities.length; i++) {\n            sum +=\n              params.data.realQuantities[i].quantity1 +\n              params.data.realQuantities[i].quantity2 +\n              params.data.realQuantities[i].quantity3 +\n              params.data.realQuantities[i].quantity4 +\n              params.data.realQuantities[i].quantity5 +\n              params.data.realQuantities[i].quantity6 +\n              params.data.realQuantities[i].quantity7 +\n              params.data.realQuantities[i].quantity8 +\n              params.data.realQuantities[i].quantity9 +\n              params.data.realQuantities[i].quantity10;\n          }\n          return sum;\n        },\n      },\n\n      {\n        headerName: \"Réel\",\n        width: 70,\n        cellStyle: { \"background-color\": TOTAL_COLOR },\n        valueGetter: function (params) {\n          var sum = 0;\n          for (let i = 0; i < params.data.realQuantities.length; i++) {\n            sum +=\n              params.data.realQuantities[i].quantity1 * params.data.price +\n              params.data.realQuantities[i].quantity2 * params.data.price +\n              params.data.realQuantities[i].quantity3 * params.data.price +\n              params.data.realQuantities[i].quantity4 * params.data.price +\n              params.data.realQuantities[i].quantity5 * params.data.price +\n              params.data.realQuantities[i].quantity6 * params.data.price +\n              params.data.realQuantities[i].quantity7 * params.data.price +\n              params.data.realQuantities[i].quantity8 * params.data.price +\n              params.data.realQuantities[i].quantity9 * params.data.price +\n              params.data.realQuantities[i].quantity10 * params.data.price;\n          }\n          return sum + \"€\";\n        },\n      },\n    ];\n    axios\n      .get(\"/products/producer/0\")\n      .then((response) => (this.products = response.data))\n      .then((rowData) => (this.rowData = rowData));\n  },\n};\nwindow.numberParser = function numberParser(params) {\n  return Number(params.newValue);\n};\n</script>\n\n<style>\n</style>"]}]}