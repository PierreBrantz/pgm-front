{"remainingRequest":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pan/Dev/maraichage/src/views/Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pan/Dev/maraichage/src/views/Product.vue","mtime":1630591901992},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pan/Dev/maraichage/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pan/Dev/maraichage/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7Cgpjb25zdCBUT1RBTF9DT0xPUiA9ICIjY2NmZmIzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0ZWRQcm9kdWNlcjogbnVsbCwKICAgICAgc2VsZWN0ZWRQcm9kdWN0OiBudWxsLAogICAgICBwcm9kdWNlcnM6IFt7IHZhbHVlOiBudWxsLCB0ZXh0OiAiQ2hvaXNpciB1biBwcm9kdWN0ZXVyLi4uIiB9XSwKICAgICAgcHJvZHVjdExpc3Q6IFt7IHZhbHVlOiBudWxsLCB0ZXh0OiAiQ2hvaXNpciB1biBwcm9kdWl0Li4uIiB9XSwKICAgICAgcHJvZHVjdDogbnVsbCwgICAgIAogICAgICBpdGVtczogW10KICAgICAgCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZmV0Y2hQcm9kdWNlcnMoKTsKICAgIHRoaXMuZmV0Y2hQcm9kdWN0TGlzdCgpOwogICAgCiAgfSwKICBtZXRob2RzOiB7CiAgIAogICAgYXN5bmMgZmV0Y2hQcm9kdWNlcnMoKSB7CiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBheGlvcwogICAgICAgIC5nZXQoIi9wcm9kdWNlcnMiKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gKHRoaXMucmVxdWVzdHMgPSByZXNwb25zZS5kYXRhKSk7CiAgICAgIGpzb24uZm9yRWFjaCgoZWxlbWVudCkgPT4KICAgICAgICB0aGlzLnByb2R1Y2Vycy5wdXNoKHsgdmFsdWU6IGVsZW1lbnQuaWQsIHRleHQ6IGVsZW1lbnQuYWJyIH0pCiAgICAgICk7CiAgICB9LAoKICAgIGFzeW5jIGZldGNoUHJvZHVjdExpc3QoKSB7CiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCBheGlvcwogICAgICAgIC5nZXQoIi9wcm9kdWN0cyIpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5yZXF1ZXN0cyA9IHJlc3BvbnNlLmRhdGEpKTsKICAgICAganNvbi5mb3JFYWNoKChlbGVtZW50KSA9PgogICAgICAgIHRoaXMucHJvZHVjdExpc3QucHVzaCh7IHZhbHVlOiBlbGVtZW50LmlkLCB0ZXh0OiBlbGVtZW50Lm5hbWUgfSkKICAgICAgKTsKICAgIH0sCiAgICBhc3luYyBjaGFuZ2VQcm9kdWN0KGFyZykgewogICAgICBjb25zdCBqc29uID0gYXdhaXQgYXhpb3MKICAgICAgICAuZ2V0KCIvcHJvZHVjdHMvIiArIGFyZykKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnJlcXVlc3RzID0gcmVzcG9uc2UuZGF0YSkpOwogICAgICAgIHRoaXMucHJvZHVjdCA9IGpzb25bMF07CiAgICAgIC8vaWYgKHR5cGVvZiBwYXJhbXMuZGF0YS5xdWFudGl0aWVzWzBdID09PSAidW5kZWZpbmVkIikgewoKCiAgICAKICAgICAgdGhpcy5pdGVtcyA9IFt7CiAgICAgICAgICBjb2wxIDogJ1Row6lvcmlxdWUnLAogICAgICAgICAgSmFudmllciA6IHRoaXMucHJvZHVjdC5xdWFudGl0aWVzWzBdLnF1YW50aXR5MSxGw6l2cmllciA6IHRoaXMucHJvZHVjdC5xdWFudGl0aWVzWzBdLnF1YW50aXR5MiwKICAgICAgICAgIE1hcnMgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTMsQXZyaWwgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTQsCiAgICAgICAgICBNYWkgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTUsSnVpbiA6IHRoaXMucHJvZHVjdC5xdWFudGl0aWVzWzBdLnF1YW50aXR5NiwKICAgICAgICAgIEp1aWxsZXQgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTcsQW/Du3QgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTgsCiAgICAgICAgICBTZXB0ZW1icmU6IHRoaXMucHJvZHVjdC5xdWFudGl0aWVzWzBdLnF1YW50aXR5OSxPY3RvYnJlIDogdGhpcy5wcm9kdWN0LnF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMCwKICAgICAgICAgIE5vdmVtYnJlIDogdGhpcy5wcm9kdWN0LnF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMSxEw6ljZW1icmUgOiB0aGlzLnByb2R1Y3QucXVhbnRpdGllc1swXS5xdWFudGl0eTEyCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBjb2wxIDogJ0RpZmbDqXJlbmNlJwogICAgICB9LAogICAgICB7CiAgICAgICAgY29sMSA6ICdQcml4JwogICAgICB9LAogICAgICAKICAgICAgXTsKICAgICAgCiAgICAgCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnByb2R1Y3QucHJvZHVjZXJzLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgbGV0IHExID0gMCwgcTI9IDAsIHEzPSAwLCBxND0gMCwgcTU9IDAsIHE2PSAwLCBxNz0gMCwgcTg9IDAsIHE5PSAwLCBxMTA9IDAsIHExMT0gMCwgcTEyID0gMDsKICAgICAgICAgaWYodGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXMubGVuZ3RoID4gMCAmJiB0aGlzLnByb2R1Y3QucHJvZHVjZXJzW2luZGV4XS5yZWFsUXVhbnRpdGllc1swXSAhPT0gInVuZGVmaW5lZCIpewogICAgICAgICAgICBxMSA9IHRoaXMucHJvZHVjdC5wcm9kdWNlcnNbaW5kZXhdLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MTsKICAgICAgICAgICAgcTIgPSB0aGlzLnByb2R1Y3QucHJvZHVjZXJzW2luZGV4XS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTI7CiAgICAgICAgICAgIHEzID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkzOwogICAgICAgICAgIHE0ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk0OwogICAgICAgICAgIHE1ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk1OwogICAgICAgICAgIHE2ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk2OwogICAgICAgICAgIHE3ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk3OwogICAgICAgICAgIHE4ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk4OwogICAgICAgICAgIHE5ID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHk5OwogICAgICAgICAgIHExMCA9IHRoaXMucHJvZHVjdC5wcm9kdWNlcnNbaW5kZXhdLnJlYWxRdWFudGl0aWVzWzBdLnF1YW50aXR5MTA7CiAgICAgICAgICAgcTExID0gdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0ucmVhbFF1YW50aXRpZXNbMF0ucXVhbnRpdHkxMTsKICAgICAgICAgICBxMTIgPSB0aGlzLnByb2R1Y3QucHJvZHVjZXJzW2luZGV4XS5yZWFsUXVhbnRpdGllc1swXS5xdWFudGl0eTEyOwoKICAgICAgICAgfQogICAgICAgIHRoaXMuaXRlbXMucHVzaCh7CiAgICAgICAgICBjb2wxIDogdGhpcy5wcm9kdWN0LnByb2R1Y2Vyc1tpbmRleF0uYWJyLAogICAgICAgICAgSmFudmllciA6IHExLEbDqXZyaWVyIDogcTIsCiAgICAgICAgICBNYXJzIDogcTMsQXZyaWwgOiBxNCwKICAgICAgICAgIE1haSA6IHE1LEp1aW4gOiBxNiwKICAgICAgICAgIEp1aWxsZXQgOiBxNyxBb8O7dCA6IHE4LAogICAgICAgICAgU2VwdGVtYnJlOiBxOSxPY3RvYnJlIDogcTEwLAogICAgICAgICAgTm92ZW1icmUgOiBxMTEsRMOpY2VtYnJlIDogcTEyCgoKICAgICAgICB9CgogICAgICAgICk7CiAgICAgICAgCiAgICAgICAgCiAgICAgIH0KICAgICAgCiAgICAgIAoKICAgIH0sCgogICAgYXN5bmMgYWRkUHJvZHVjZXJDbGljaygpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQcm9kdWN0ID09IG51bGwpIHsKICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCJWZXVpbGxleiBjaG9pc2lyIHVuIHByb2R1aXQuLi4iLCB7CiAgICAgICAgICB0aXRsZTogIkluZm8iLAogICAgICAgICAgdmFyaWFudDogImRhbmdlciIsCiAgICAgICAgICBzb2xpZDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUHJvZHVjZXIgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoIlZldWlsbGV6IGNob2lzaXIgdW4gcHJvZHVjdGV1ci4uLiIsIHsKICAgICAgICAgIHRpdGxlOiAiSW5mbyIsCiAgICAgICAgICB2YXJpYW50OiAiZGFuZ2VyIiwKICAgICAgICAgIHNvbGlkOiB0cnVlLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF3YWl0IGF4aW9zCiAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgIi9wcm9kdWNlcnMvIiArCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb2R1Y2VyICsKICAgICAgICAgICAgICAiL3Byb2R1Y3QvIiArCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFByb2R1Y3QKICAgICAgICAgICkKICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gKHRoaXMucmVxdWVzdHMgPSByZXNwb25zZS5kYXRhKSk7CiAgICAgICAgYXdhaXQgYXhpb3MKICAgICAgICAgIC5nZXQoIi9wcm9kdWN0cy9wcm9kdWNlci8iICsgdGhpcy5zZWxlY3RlZFByb2R1Y2VyKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEpKQogICAgICAgICAgLnRoZW4oKHJvd0RhdGEpID0+ICh0aGlzLnJvd0RhdGEgPSByb3dEYXRhKSk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div style=\"display: flex; flex-direction: column; height: 100%\">\n    <b-container>\n      <b-row>\n        <b-col cols=\"3\">\n          <b-form-select\n            v-model=\"selectedProduct\"\n            :options=\"productList\"\n            v-on:change=\"changeProduct\"\n            class=\"m-2\"\n          ></b-form-select>\n        </b-col>\n        <b-col cols=\"3\">\n          <b-form-select\n            v-model=\"selectedProducer\"\n            :options=\"producers\"\n            class=\"m-2\"\n          ></b-form-select>\n        </b-col>\n\n        <b-col cols=\"2\">\n          <b-button\n            variant=\"outline-primary\"\n            @click=\"addProducerClick\"\n            class=\"m-2\"\n            >Associer Producteur</b-button\n          >\n        </b-col>\n        <b-col cols=\"3\"> </b-col>\n      </b-row>\n      <b-row v-if=\"product != null\">{{ product.name + ' ' + product.packaging.name }}</b-row>\n      <b-row> \n        \n        <div>\n    <b-table striped hover responsive :items=\"items\"></b-table>\n  </div></b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nconst TOTAL_COLOR = \"#ccffb3\";\n\nexport default {\n  data() {\n    return {\n      selectedProducer: null,\n      selectedProduct: null,\n      producers: [{ value: null, text: \"Choisir un producteur...\" }],\n      productList: [{ value: null, text: \"Choisir un produit...\" }],\n      product: null,     \n      items: []\n      \n    };\n  },\n  components: {},\n  mounted() {\n    this.fetchProducers();\n    this.fetchProductList();\n    \n  },\n  methods: {\n   \n    async fetchProducers() {\n      const json = await axios\n        .get(\"/producers\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.producers.push({ value: element.id, text: element.abr })\n      );\n    },\n\n    async fetchProductList() {\n      const json = await axios\n        .get(\"/products\")\n        .then((response) => (this.requests = response.data));\n      json.forEach((element) =>\n        this.productList.push({ value: element.id, text: element.name })\n      );\n    },\n    async changeProduct(arg) {\n      const json = await axios\n        .get(\"/products/\" + arg)\n        .then((response) => (this.requests = response.data));\n        this.product = json[0];\n      //if (typeof params.data.quantities[0] === \"undefined\") {\n\n\n    \n      this.items = [{\n          col1 : 'Théorique',\n          Janvier : this.product.quantities[0].quantity1,Février : this.product.quantities[0].quantity2,\n          Mars : this.product.quantities[0].quantity3,Avril : this.product.quantities[0].quantity4,\n          Mai : this.product.quantities[0].quantity5,Juin : this.product.quantities[0].quantity6,\n          Juillet : this.product.quantities[0].quantity7,Août : this.product.quantities[0].quantity8,\n          Septembre: this.product.quantities[0].quantity9,Octobre : this.product.quantities[0].quantity10,\n          Novembre : this.product.quantities[0].quantity11,Décembre : this.product.quantities[0].quantity12\n      },\n      {\n        col1 : 'Différence'\n      },\n      {\n        col1 : 'Prix'\n      },\n      \n      ];\n      \n     \n      for (let index = 0; index < this.product.producers.length; index++) {\n       let q1 = 0, q2= 0, q3= 0, q4= 0, q5= 0, q6= 0, q7= 0, q8= 0, q9= 0, q10= 0, q11= 0, q12 = 0;\n         if(this.product.producers[index].realQuantities.length > 0 && this.product.producers[index].realQuantities[0] !== \"undefined\"){\n            q1 = this.product.producers[index].realQuantities[0].quantity1;\n            q2 = this.product.producers[index].realQuantities[0].quantity2;\n            q3 = this.product.producers[index].realQuantities[0].quantity3;\n           q4 = this.product.producers[index].realQuantities[0].quantity4;\n           q5 = this.product.producers[index].realQuantities[0].quantity5;\n           q6 = this.product.producers[index].realQuantities[0].quantity6;\n           q7 = this.product.producers[index].realQuantities[0].quantity7;\n           q8 = this.product.producers[index].realQuantities[0].quantity8;\n           q9 = this.product.producers[index].realQuantities[0].quantity9;\n           q10 = this.product.producers[index].realQuantities[0].quantity10;\n           q11 = this.product.producers[index].realQuantities[0].quantity11;\n           q12 = this.product.producers[index].realQuantities[0].quantity12;\n\n         }\n        this.items.push({\n          col1 : this.product.producers[index].abr,\n          Janvier : q1,Février : q2,\n          Mars : q3,Avril : q4,\n          Mai : q5,Juin : q6,\n          Juillet : q7,Août : q8,\n          Septembre: q9,Octobre : q10,\n          Novembre : q11,Décembre : q12\n\n\n        }\n\n        );\n        \n        \n      }\n      \n      \n\n    },\n\n    async addProducerClick() {\n      if (this.selectedProduct == null) {\n        this.$bvToast.toast(\"Veuillez choisir un produit...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else if (this.selectedProducer == null) {\n        this.$bvToast.toast(\"Veuillez choisir un producteur...\", {\n          title: \"Info\",\n          variant: \"danger\",\n          solid: true,\n        });\n      } else {\n        await axios\n          .post(\n            \"/producers/\" +\n              this.selectedProducer +\n              \"/product/\" +\n              this.selectedProduct\n          )\n          .then((response) => (this.requests = response.data));\n        await axios\n          .get(\"/products/producer/\" + this.selectedProducer)\n          .then((response) => (this.products = response.data))\n          .then((rowData) => (this.rowData = rowData));\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.btn {\n  font-size: 0.8rem;\n}\n</style>"]}]}